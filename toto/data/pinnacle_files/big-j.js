function betterpopup(c,b,a){if(!window.focus){return true}if(typeof(c)=="string"){href=c}else{href=c.href}window.open(href,b,a);return false}jQueryReady(function(){(function(a){a.fn.marquee=function(b){var f=[],d=this.length;function c(o,m,n){var l=n.behavior,j=n.width,h=n.dir;var k=0;if(l=="alternate"){k=o==1?m[n.widthAxis]-(j*2):j}else{if(l=="slide"){if(o==-1){k=h==-1?m[n.widthAxis]:j}else{k=h==-1?m[n.widthAxis]-(j*2):0}}else{k=o==-1?m[n.widthAxis]:0}}return k}function g(){var j=f.length,k=null,n=null,m={},l=[],h=false;while(j--){k=f[j];n=a(k);m=n.data("marqueeState");if(n.data("paused")!==true){k[m.axis]+=(m.scrollamount*m.dir);h=m.dir==-1?k[m.axis]<=c(m.dir*-1,k,m):k[m.axis]>=c(m.dir*-1,k,m);if((m.behavior=="scroll"&&m.last==k[m.axis])||(m.behavior=="alternate"&&h&&m.last!=-1)||(m.behavior=="slide"&&h&&m.last!=-1)){if(m.behavior=="alternate"){m.dir*=-1}m.last=-1;n.trigger("stop");m.loops--;if(m.loops===0){if(m.behavior!="slide"){k[m.axis]=c(m.dir,k,m)}else{k[m.axis]=c(m.dir*-1,k,m)}n.trigger("end")}else{l.push(k);n.trigger("start");k[m.axis]=c(m.dir,k,m)}}else{l.push(k)}m.last=k[m.axis];n.data("marqueeState",m)}else{l.push(k)}}f=l;if(f.length){setTimeout(g,25)}}this.each(function(k){var o=a(this),h=o.attr("width")||o.width(),p=o.attr("height")||o.height();if(p<18){p=18}var q=o.after("<div "+(b?'class="'+b+'" ':"")+'style="display: block-inline; width: '+h+"px; height: "+p+'px; overflow: hidden;"><div style="float: left; white-space: nowrap;">'+o.html()+"</div></div>").next(),n=q.get(0),l=0,m=(o.attr("direction")||"left").toLowerCase(),j={dir:/down|right/.test(m)?-1:1,axis:/left|right/.test(m)?"scrollLeft":"scrollTop",widthAxis:/left|right/.test(m)?"scrollWidth":"scrollHeight",last:-1,loops:o.attr("loop")||-1,scrollamount:o.attr("scrollamount")||this.scrollAmount||2,behavior:(o.attr("behavior")||"scroll").toLowerCase(),width:/left|right/.test(m)?h:p};if(o.attr("loop")==-1&&j.behavior=="slide"){j.loops=1}o.remove();if(/left|right/.test(m)){q.find("> div").css("padding","0 "+h+"px")}else{q.find("> div").css("padding",p+"px 0")}q.bind("stop",function(){q.data("paused",true)}).bind("pause",function(){q.data("paused",true)}).bind("start",function(){q.data("paused",false)}).bind("unpause",function(){q.data("paused",false)}).data("marqueeState",j);f.push(n);n[j.axis]=c(j.dir,n,j);q.trigger("start");if(k+1==d){g()}});return a(f)}}(jQuery))});jQueryReady(function(){(function(c){function a(g,d,f){this.dec=g;this.group=d;this.neg=f}function b(d){var h=".";var f=",";var g="-";if(d=="us"||d=="ae"||d=="eg"||d=="il"||d=="jp"||d=="sk"||d=="th"||d=="cn"||d=="hk"||d=="tw"||d=="au"||d=="ca"||d=="gb"||d=="in"){h=".";f=","}else{if(d=="de"||d=="vn"||d=="es"||d=="dk"||d=="at"||d=="gr"||d=="br"){h=",";f="."}else{if(d=="cz"||d=="fr"||d=="fi"||d=="ru"||d=="se"){f=" ";h=","}else{if(d=="ch"){f="'";h="."}}}}return new a(h,f,g)}c.formatNumber=function(g,f){var f=c.extend({},c.fn.parse.defaults,f);var j=b(f.locale.toLowerCase());var l=j.dec;var h=j.group;var k=j.neg;var d=new String(g);d=d.replace(".",l).replace("-",k);return d};c.fn.parse=function(d){var d=c.extend({},c.fn.parse.defaults,d);var h=b(d.locale.toLowerCase());var l=h.dec;var g=h.group;var k=h.neg;var f="1234567890.-";var j=[];this.each(function(){var q=new String(c(this).text());if(c(this).is(":input")){q=new String(c(this).val())}while(q.indexOf(g)>-1){q=q.replace(g,"")}q=q.replace(l,".").replace(k,"-");var p="";var m=false;if(q.charAt(q.length-1)=="%"){m=true}for(var n=0;n<q.length;n++){if(f.indexOf(q.charAt(n))>-1){p=p+q.charAt(n)}}var o=new Number(p);if(m){o=o/100;o=o.toFixed(p.length-1)}j.push(o)});return j};c.fn.format=function(d){var d=c.extend({},c.fn.format.defaults,d);var g=b(d.locale.toLowerCase());var k=g.dec;var f=g.group;var j=g.neg;var h="0#-,.";return this.each(function(){var w=new String(c(this).text());if(c(this).is(":input")){w=new String(c(this).val())}var B="";var q=false;for(var C=0;C<d.format.length;C++){if(h.indexOf(d.format.charAt(C))==-1){B=B+d.format.charAt(C)}else{if(C==0&&d.format.charAt(C)=="-"){q=true;continue}else{break}}}var m="";for(var C=d.format.length-1;C>=0;C--){if(h.indexOf(d.format.charAt(C))==-1){m=d.format.charAt(C)+m}else{break}}d.format=d.format.substring(B.length);d.format=d.format.substring(0,d.format.length-m.length);while(w.indexOf(f)>-1){w=w.replace(f,"")}var l=new Number(w.replace(k,".").replace(j,"-"));if(m=="%"){l=l*100}var v="";var u=l%1;if(d.format.indexOf(".")>-1){var A=k;var r=d.format.substring(d.format.lastIndexOf(".")+1);var y=new String(u.toFixed(r.length));y=y.substring(y.lastIndexOf(".")+1);for(var C=0;C<r.length;C++){if(r.charAt(C)=="#"&&y.charAt(C)!="0"){A+=y.charAt(C);continue}else{if(r.charAt(C)=="#"&&y.charAt(C)=="0"){var p=y.substring(C);if(p.match("[1-9]")){A+=y.charAt(C);continue}else{break}}else{if(r.charAt(C)=="0"){A+=y.charAt(C)}}}}v+=A}else{l=Math.round(l)}var s=Math.floor(l);if(l<0){s=Math.ceil(l)}var D="";if(s==0){D="0"}else{var z="";if(d.format.indexOf(".")==-1){z=d.format}else{z=d.format.substring(0,d.format.indexOf("."))}var t=new String(Math.abs(s));var o=9999;if(z.lastIndexOf(",")!=-1){o=z.length-z.lastIndexOf(",")-1}var n=0;for(var C=t.length-1;C>-1;C--){D=t.charAt(C)+D;n++;if(n==o&&C!=0){D=f+D;n=0}}}v=D+v;if(l<0&&q&&B.length>0){B=j+B}else{if(l<0){v=j+v}}if(!d.decimalSeparatorAlwaysShown){if(v.lastIndexOf(k)==v.length-1){v=v.substring(0,v.length-1)}}v=B+v+m;if(c(this).is(":input")){c(this).val(v)}else{c(this).text(v)}})};c.fn.parse.defaults={locale:"us",decimalSeparatorAlwaysShown:false};c.fn.format.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:false}})(jQuery)});(function(a){if(typeof define==="function"&&define.amd){if(typeof jQuery!=="undefined"){define(["jquery"],a)}else{define([],a)}}else{if(typeof jQuery!=="undefined"){a(jQuery)}else{a()}}})(function(b,f){var s={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},v=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],r={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},n=Object.prototype.toString,u=/^[0-9]+$/;function q(w,A){var C=decodeURI(w),z=a[A||false?"strict":"loose"].exec(C),B={attr:{},param:{},seg:{}},y=14;while(y--){B.attr[v[y]]=z[y]||""}B.param.query=g(B.attr.query);B.param.fragment=g(B.attr.fragment);B.seg.path=B.attr.path.replace(/^\/+|\/+$/g,"").split("/");B.seg.fragment=B.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");B.attr.base=B.attr.host?(B.attr.protocol?B.attr.protocol+"://"+B.attr.host:B.attr.host)+(B.attr.port?":"+B.attr.port:""):"";return B}function o(y){var w=y.tagName;if(typeof w!=="undefined"){return s[w.toLowerCase()]}return w}function c(A,z){if(A[z].length==0){return A[z]={}}var y={};for(var w in A[z]){y[w]=A[z][w]}A[z]=y;return y}function m(B,z,y,C){var w=B.shift();if(!w){if(h(z[y])){z[y].push(C)}else{if("object"==typeof z[y]){z[y]=C}else{if("undefined"==typeof z[y]){z[y]=C}else{z[y]=[z[y],C]}}}}else{var A=z[y]=z[y]||[];if("]"==w){if(h(A)){if(""!=C){A.push(C)}}else{if("object"==typeof A){A[l(A).length]=C}else{A=z[y]=[z[y],C]}}}else{if(~w.indexOf("]")){w=w.substr(0,w.length-1);if(!u.test(w)&&h(A)){A=c(z,y)}m(B,A,w,C)}else{if(!u.test(w)&&h(A)){A=c(z,y)}m(B,A,w,C)}}}}function d(B,A,E){if(~A.indexOf("]")){var D=A.split("["),w=D.length,C=w-1;m(D,B,"base",E)}else{if(!u.test(A)&&h(B.base)){var z={};for(var y in B.base){z[y]=B.base[y]}B.base=z}k(B.base,A,E)}return B}function g(w){return j(String(w).split(/&|;/),function(y,D){try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(A){}var E=D.indexOf("="),C=p(D),z=D.substr(0,C||E),B=D.substr(C||E,D.length),B=B.substr(B.indexOf("=")+1,B.length);if(""==z){z=D,B=""}return d(y,z,B)},{base:{}}).base}function k(z,y,A){var w=z[y];if(f===w){z[y]=A}else{if(h(w)){w.push(A)}else{z[y]=[w,A]}}}function p(A){var w=A.length,z,B;for(var y=0;y<w;++y){B=A[y];if("]"==B){z=false}if("["==B){z=true}if("="==B&&!z){return y}}}function j(B,y){var z=0,w=B.length>>0,A=arguments[2];while(z<w){if(z in B){A=y.call(f,A,B[z],z,B)}++z}return A}function h(w){return Object.prototype.toString.call(w)==="[object Array]"}function l(y){var w=[];for(prop in y){if(y.hasOwnProperty(prop)){w.push(prop)}}return w}function t(w,y){if(arguments.length===1&&w===true){y=true;w=f}y=y||false;w=w||window.location.toString();return{data:q(w,y),attr:function(z){z=r[z]||z;return typeof z!=="undefined"?this.data.attr[z]:this.data.attr},param:function(z){return typeof z!=="undefined"?this.data.param.query[z]:this.data.param.query},fparam:function(z){return typeof z!=="undefined"?this.data.param.fragment[z]:this.data.param.fragment},segment:function(z){if(typeof z==="undefined"){return this.data.seg.path}else{z=z<0?this.data.seg.path.length+z:z-1;return this.data.seg.path[z]}},fsegment:function(z){if(typeof z==="undefined"){return this.data.seg.fragment}else{z=z<0?this.data.seg.fragment.length+z:z-1;return this.data.seg.fragment[z]}}}}window.purl=t});jQueryReady(function(){(function($){$.toJSON=function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o)}var type=typeof(o);if(o===null){return"null"}if(type=="undefined"){return undefined}if(type=="number"||type=="boolean"){return o+""}if(type=="string"){return $.quoteString(o)}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month}var day=o.getUTCDate();if(day<10){day="0"+day}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number"){name='"'+k+'"'}else{if(type=="string"){name=$.quoteString(k)}else{continue}}if(typeof o[k]=="function"){continue}var val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(", ")+"}"}};$.evalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery)});(function(){JSLINQ=window.JSLINQ=function(a){return new JSLINQ.fn.init(a)};JSLINQ.fn=JSLINQ.prototype={init:function(a){if(!$.isArray(a)){this.items=[]}else{this.items=a}},jslinq:"2.20",ToArray:function(){return this.items},Where:function(d){var c;var a=new Array();for(var b=0;b<this.items.length;b++){if(d(this.items[b],b)){a[a.length]=this.items[b]}}return new JSLINQ(a)},Select:function(d){var c;var a=new Array();for(var b=0;b<this.items.length;b++){if(d(this.items[b])){a[a.length]=d(this.items[b])}}return new JSLINQ(a)},OrderBy:function(c){var b=new Array();for(var a=0;a<this.items.length;a++){b[b.length]=this.items[a]}return new JSLINQ(b.sort(function(g,f){var d=c(g);var h=c(f);return((d<h)?-1:((d>h)?1:0))}))},OrderByDescending:function(c){var b=new Array();for(var a=0;a<this.items.length;a++){b[b.length]=this.items[a]}return new JSLINQ(b.sort(function(g,f){var d=c(f);var h=c(g);return((d<h)?-1:((d>h)?1:0))}))},SelectMany:function(c){var b=new Array();for(var a=0;a<this.items.length;a++){b=b.concat(c(this.items[a]))}return new JSLINQ(b)},Count:function(a){if(a==null){return this.items.length}else{return this.Where(a).items.length}},Distinct:function(d){var b;var f=new Object();var c=new Array();for(var a=0;a<this.items.length;a++){b=d(this.items[a]);if(f[b]==null){f[b]=true;c[c.length]=b}}f=null;return new JSLINQ(c)},Any:function(b){for(var a=0;a<this.items.length;a++){if(b(this.items[a],a)){return true}}return false},All:function(b){for(var a=0;a<this.items.length;a++){if(!b(this.items[a],a)){return false}}return true},Reverse:function(){var b=new Array();for(var a=this.items.length-1;a>-1;a--){b[b.length]=this.items[a]}return new JSLINQ(b)},First:function(a){if(a!=null){return this.Where(a).First()}else{if(this.items.length>0){return this.items[0]}else{return null}}},Last:function(a){if(a!=null){return this.Where(a).Last()}else{if(this.items.length>0){return this.items[this.items.length-1]}else{return null}}},ElementAt:function(a){return this.items[a]},Concat:function(b){var a=b.items||b;return new JSLINQ(this.items.concat(a))},Intersect:function(h,k){var j;if(k!=undefined){j=k}else{j=function(l,b,a,m){return l==a}}var f=h.items||h;var d=new Array();for(var g=0;g<this.items.length;g++){for(var c=0;c<f.length;c++){if(j(this.items[g],g,f[c],c)){d[d.length]=this.items[g]}}}return new JSLINQ(d)},DefaultIfEmpty:function(a){if(this.items.length==0){return a}return this},ElementAtOrDefault:function(b,a){if(b>=0&&b<this.items.length){return this.items[b]}return a},FirstOrDefault:function(a){return this.First()||a},LastOrDefault:function(a){return this.Last()||a}};JSLINQ.fn.init.prototype=JSLINQ.fn})();LINES.ajax=(function(){return{timedAjaxCall:function(c){var b=$.Deferred();var a=new LINES.stopWatch2();a.startstop();$.ajax(c).done(function(d){a.startstop();LINES.utils.logNetworkCall(a.Getms(),c.url,false);b.resolve(d)}).fail(function(j,k,g){a.startstop();LINES.utils.logNetworkCall(a.Getms(),c.url,true);if(g==undefined){g=""}var h=false;var f=j.status+" "+k+" "+j.statusText+" "+g+" "+c.url;if(k=="parsererror"){h=true}else{LINES.logError(f,true,j.status)}var d=new Error(f);d.status=j.status;d.ignoreError=h;b.reject(d)});return b.promise()},post:function(){var c=$.makeArray(arguments);var b=c.shift();var a=c.shift();var d=c.shift();if(a==undefined){a="text"}if(d==undefined){d="test=test"}return this.timedAjaxCall({type:"POST",url:b,data:d,dataType:a})},getLines:function(){var m=$.Deferred();try{var j=$.makeArray(arguments);var b=j.shift();var c=j.shift();var d=j.shift();var k=j.shift();var g=j.shift();if(g==undefined){g=true}LINES.state.cleanQueues();var a=LINES.routing.getLinesUrl(b,c);var f={buySellLevels:$.toJSON(d)};var l=null;if(k!=null&&!$.isEmptyObject(k)){l=$.toJSON(k);f.selectedLeagueIds=l}this.timedAjaxCall({type:"GET",url:a,data:f,dataType:"json"}).done(function(n){if(history.pushState&&g){history.replaceState(null,window.title,LINES.routing.getBetUrl(b,c,l))}m.resolve(n)}).fail(function(n){m.reject(n)})}catch(h){m.reject(h)}return m.promise()},getUpdates:function(a){var b=LINES.routing.getUpdatesUrl(a,LINES.state.selectedEventFilterId,LINES.state.selectedPeriodNumber,LINES.state.selectedTime);return this.post(b,"json",{selectedLeagueIds:$.toJSON(LINES.state.selectedLeagueIds),buySellLevels:$.toJSON(LINES.state.selectedBuySellLevels)})},getBalance:function(){var a=LINES.config.virtualDirectory+"Asia/CustomerBalance?customerId="+LINES.state.customerId;return this.timedAjaxCall({type:"GET",url:a,dataType:"text"})},getBetMenu:function(){var a=LINES.routing.getBetMenuUrl();return this.timedAjaxCall({type:"GET",url:a,data:{expandedSportId:LINES.state.expandedSportId},dataType:"text"})},placeBet:function(b){var a=LINES.config.virtualDirectory+"BetTicket/PlaceBet";return this.post(a,"json",b)},session:{postSelectLinesArea:function(){var a=LINES.config.virtualDirectory+"AsiaSession/SelectLinesArea?linesArea=Lines";return $.ajax({type:"POST",url:a,data:"test=test",dataType:"text"}).fail(function(c,d,b){if(b==undefined){b=""}LINES.logError(c.status+" "+d+" "+c.statusText+" "+b+" "+a,true,c.status)})},postSelectLines:function(){var a=LINES.config.virtualDirectory+"AsiaSession/SelectLines";return $.ajax({type:"POST",url:a,data:{selectedEventFilterId:LINES.state.selectedEventFilterId,selectedPeriodNumber:LINES.state.selectedPeriodNumber,selectedTime:LINES.state.selectedTime,selectedLineViewType:LINES.state.selectedLineViewType,selectedLeagueIds:$.toJSON(LINES.state.selectedLeagueIds)},dataType:"text"}).fail(function(c,d,b){if(b==undefined){b=""}LINES.logError(c.status+" "+d+" "+c.statusText+" "+b+" "+a,true,c.status)})},postBuySellLevels:function(a,c){var b=LINES.config.virtualDirectory+"AsiaSession/SelectBuySellLevel";return $.ajax({type:"POST",url:b,data:{leagueId:a,buySellLevel:c},dataType:"text"}).fail(function(f,g,d){if(d==undefined){d=""}LINES.logError(f.status+" "+g+" "+f.statusText+" "+d+" "+b,true,f.status)})},postSelectLeagues:function(b){var a=LINES.config.virtualDirectory+"AsiaSession/SelectLeagues/";return $.ajax({type:"POST",data:b,url:a,dataType:"text"}).fail(function(d,f,c){if(c==undefined){c=""}LINES.logError(d.status+" "+f+" "+d.statusText+" "+c+" "+a,true,d.status)})}}}})();LINES.helpers.alternateLines={enhancedInit:function(){var b=$("#AlternateLines");b.on("click",".close",function(){return LINES.helpers.alternateLines.close()});b.on("click","a.wLnk",function(){LINES.helpers.Event.clickPriceDiv($(this).parent());return false});b.on("dblclick","a.wLnk",function(){return false});b.on("click","td.price",function(){LINES.helpers.Event.clickPriceDiv(this)});var a=LINES.utils.getParameterByName("alternateLines",window.location.hash);if(a){LINES.helpers.alternateLines.openRefresh(a)}},isOpen:function(){return !($("#AlternateLines").hasClass("hidden"))},closeHtml:function(){LINES.utils.dropParameterFromHashTag("alternateLines");$("#AlternateLines").addClass("hidden");$("#AlternateLines").html("")},close:function(){try{LINES.helpers.alternateLines.closeHtml();LINES.ajax.session.postSelectLinesArea();return false}catch(a){LINES.logError(a);return true}},open:function(b){try{b=$(b).find("a");if(b.exists()){LINES.utils.showLoadingDiv(b.parent(),"small","left");var a=b.attr("href");LINES.helpers.alternateLines.updateHashTag(a);LINES.ajax.post(a).done(function(d){LINES.utils.hideLoadingDiv();$("#AlternateLines").html(d);LINES.helpers.alternateLines.position(b,false)}).fail(function(d){LINES.utils.hideLoadingDiv();$("#AlternateLines").html($("#errorMessage").html());LINES.helpers.alternateLines.position(b,false)})}return false}catch(c){LINES.logError(c);return true}},openRefresh:function(a){LINES.helpers.alternateLines.updateHashTag(a);LINES.ajax.post(a).done(function(b){LINES.utils.hideLoadingDiv();$("#AlternateLines").html(b);LINES.helpers.alternateLines.positionRefresh(a)}).fail(function(b){LINES.utils.hideLoadingDiv();$("#AlternateLines").html($("#errorMessage").html());LINES.helpers.alternateLines.positionRefresh(a)})},updateHashTag:function(a){LINES.utils.addParameterToHashTag("alternateLines",a)},positionRefresh:function(f){var d=$("#AlternateLines");var b=d.find("#AltLinesUniqueEventId").html();if(b==undefined){var g=f.split("/");var h=g[g.length-4];var a=g[g.length-5];var c=g[g.length-6];b=h+"_"+c+"_"+a}LINES.helpers.alternateLines.position($("#"+b+" td.alt a"),true)},position:function(d,k){var c=$("#AlternateLines");if(k){c.addClass("hidden")}c.css("position","absolute");var f=0;if(d.offset()!=null){f=d.offset()}var a=$("#lines_area");var h=8;var j=a.offset();var b=0;if(j!=null){b=j.top}var g=f.top-b-h+a.scrollTop()+d.parent().height();c.css("top",g);c.css("right",3);c.removeClass("hidden")}};LINES.helpers.customerBalance={enhancedInit:function(){$("#CustomerBalance").on("click","#AvailableBalance",function(){if($("#ExpandedBalance").css("display")=="none"){LINES.helpers.customerBalance.open()}else{LINES.helpers.customerBalance.close()}return false});$("#CustomerBalance").on("click",".refresh",function(){try{LINES.helpers.customerBalance.refresh()}catch(a){LINES.logError(a,true)}return false});$("#CustomerBalance").on("click",".retry",function(){LINES.helpers.customerBalance.refresh("none");return false});LINES.helpers.customerBalance.refresh("none")},countDown:function(){LINES.state.timerCountDownCustomerBalanceClose--;if(LINES.state.timerCountDownCustomerBalanceClose==0){LINES.helpers.customerBalance.close()}LINES.state.timerCountDownCustomerBalance--;if(LINES.state.timerCountDownCustomerBalance==0){LINES.helpers.customerBalance.refresh()}},open:function(){$("#CustomerBalance .expand").addClass("Over");$("#ExpandedBalance").slideDown();LINES.state.timerCountDownCustomerBalanceClose=LINES.config.timerLimitCustomerBalanceClose},close:function(){$("#CustomerBalance .expand").removeClass("Over");$("#ExpandedBalance").slideUp()},refresh:function(b){var a=$("#CustomerBalance");if(LINES.utils!=null&&$.isFunction(LINES.utils.showLoadingDiv)){if($("#CustomerBalance .expand").attr("class")=="Over"){LINES.utils.showLoadingDiv(a,"medium","center",true)}else{LINES.utils.showLoadingDiv(a,"small","center",true)}}LINES.ajax.getBalance().done(function(c){try{var d=(b!=undefined)?b:$("#ExpandedBalance").css("display");a.html(c).find("#ExpandedBalance").css("display",d);if(d=="block"&&!$("#CustomerBalance .expand").hasClass("Over")){$("#CustomerBalance .expand").addClass("Over")}LINES.state.timerCountDownCustomerBalance=LINES.config.timerLimitCustomerBalance}catch(f){LINES.logError(f)}}).fail(function(c){LINES.state.timerCountDownCustomerBalance=LINES.config.timerLimitCustomerBalance*2;if(!($("#ExpandedBalance").exists())){$("#CustomerBalance").html($("#errorMessageSlim").html())}}).always(function(){LINES.utils.hideLoadingDiv("CustomerBalance")})}};LINES.helpers.betMenu={enhancedInit:function(){var j=$("#MenuContent");j.on("click",".sportLink",function(){return LINES.helpers.betMenu.clickSport($(this))});j.on("click",".filterLink",function(){LINES.utils.popups.closeAll();$("#lines").on("click",".retry",function(){LINES.helpers.betMenu.retry();return false});return LINES.helpers.betMenu.clickEventFilter($(this))});var b=LINES.utils.getParameterByName("sport",location.hash);if(b){LINES.helpers.tabs.hashConfig.sport.hashValue=b}var g=LINES.routing.getStateFromMenuUrl(location.href);var a=g.eventFilter;LINES.state.urlParams.eventFilterName=a;if(history.pushState){var f=g.sport;var h=LINES.utils.getParameterByName("selectedLeagueIds",location.search);if(h!=null){if(decodeURIComponent!=undefined){h=decodeURIComponent(h);try{$.parseJSON(h)}catch(d){h=null}}}var c=LINES.routing.getBetUrl(f,a,h);history.replaceState(null,window.title,c)}},retry:function(){var a=$(".selectedFilter").find(".filterLink").attr("href");var b=LINES.helpers.betMenu.getRequestParams(a);LINES.state.selectedEventFilterName=b.eventFilterName;LINES.helpers.betMenu.loadLines(b.sportName,b.eventFilterName);return false},clickSport:function(a){this.progress.hide();try{if(!a.parent().hasClass("selectedSport")&&!this.state.isLoading()){LINES.state.expandedSportId=a.parent().attr("id").split("_")[1];var c=$("#MenuContent");c.find("ul.sportList li.selectedSport").removeClass("selectedSport");a.parent().addClass("selectedSport");c.find(".sportLink").parent().find(".filterList").slideUp("slow");a.parent().find(".filterList").slideDown("slow")}return false}catch(b){LINES.logError(b);return true}},state:(function(){var b=this;this.isLoading=null;this.isCancelled=null;this.isRendering=null;function a(c,d){if(d===undefined){return b[c]===true}b[c]=d===true;return b[c]}return{isLoading:function(){var c=a("isLoading",arguments[0]);if(c){b.isRendering=false}return a("isLoading",arguments[0])},isCancelled:function(){var c=a("isCancelled",arguments[0]);return c},isRendering:function(){var c=a("isRendering",arguments[0]);b.isLoading=false;if(!c){b.isCancelled=false}return c},done:function(){b.isLoading=false;b.isCancelled=false;b.isRendering=false}}})(),progress:(function(){return{show:function(){this.hide();if(LINES.helpers.betMenu.lastClickedLink!=null){LINES.utils.showLoadingDiv($(LINES.helpers.betMenu.lastClickedLink).parent(),"small","left",true,"betMenu",-23)}},hide:function(){LINES.utils.hideLoadingDiv("betMenu")}}})(),lastClickedLink:null,getEventCount:function(a){var c=a.parent();var d=c.find("span");if(d==null||!d.exists()){return null}var b=parseInt(d.text().replace("(","").replace(")",""),10);if(isNaN(b)){return null}return b},isFullPageLoadRequired:function(){var a=LINES.features.OldBrowsersFullRefresh===true&&LINES.utils.isIE7or8();return a},clickEventFilter:function(b){if(this.isFullPageLoadRequired()){return true}if(b.parent().hasClass("selectedFilter")||this.state.isLoading()){return false}this.lastClickedLink=b;try{var d=LINES.helpers.betMenu.getRequestParams(b.attr("href"));var a=b.attr("id").split("_")[1];LINES.state.selectedEventFilterName=d.eventFilterName;if(LINES.state.selectedSportId!=null&&a!=LINES.state.selectedSportId){LINES.state.selectedPeriodNumber=null;LINES.state.selectedTime=null}LINES.state.selectedSportId=a;LINES.state.selectedEventFilterId=b.attr("id").split("_")[2];var f=$("#MenuContent");f.find("li.selectedFilter").removeClass("selectedFilter");b.parent().addClass("selectedFilter");LINES.helpers.betMenu.loadLines(d.sportName,d.eventFilterName);return false}catch(c){LINES.logError(c);return true}},refresh:function(){if(LINES.state.selectedEventFilterId==null){return}LINES.ajax.getBetMenu().done(function(a){if(a!=""){$("#MenuContent").html(a)}LINES.state.timerCountDownBetMenuRefresh=LINES.config.timerLimitBetMenuRefresh}).fail(function(a){LINES.state.timerCountDownBetMenuRefresh=(LINES.config.timerLimitBetMenuRefresh*2);LINES.utils.hideLoadingDiv("betMenu")})},countDown:function(){LINES.state.timerCountDownBetMenuRefresh--;if(LINES.state.timerCountDownBetMenuRefresh==0){LINES.helpers.betMenu.refresh()}},getRequestParams:function(a){var b=LINES.routing.getStateFromMenuUrl(a);return{sportName:b.sport,eventFilterName:b.eventFilter}},onError:function(a){LINES.logError(a);LINES.utils.hideLoadingDiv("betMenu");$("#lines").html($("#errorMessageSlim").html())},getMenuLinkFromHash:function(){var d=null;var c=$("#MenuContent");var a=LINES.utils.getParameterByName("sport",window.location.hash);if(a!=undefined&&a!=""){var b=LINES.routing.getStateFromMenuUrl(a);c.find("a.filterLink").each(function(f,g){if(g.href.indexOf(b.sport+"/"+b.eventFilter)!=-1){d=g.id;return false}return true})}return d},getLinesPromise:function(h,a,g,d){var f=this;LINES.state.cleanQueues();if(this.state.isLoading()){this.state.isCancelled(true)}else{this.state.isLoading(true)}var b=$.Deferred();this.progress.show();var c=LINES.routing.getLinesUrl(h,a);LINES.helpers.tabs.activateTabWithHash("sport",c);LINES.utils.sleep(0).done(function(){LINES.ajax.getLines(h,a,g,d).done(function(l){try{if(f.state.isCancelled()){l=null}b.resolve(l);var k=LINES.utils.popups.anyOpen(LINES.utils.popups.hoverPopups);LINES.utils.popups.closeAllExcept(LINES.utils.popups.hoverPopups);if(k){LINES.utils.hideLines()}else{LINES.utils.showLines()}f.state.isLoading(false);f.progress.hide();var j=f.getMenuLinkFromHash();if(j!=null&&f.lastClickedLink!=null&&j!==f.lastClickedLink.attr("id")){f.lastClickedLink.parent().removeClass("selectedFilter");var n=$("#"+j);n.parent().addClass("selectedFilter");f.lastClickedLink=n}}catch(m){LINES.logError(m)}}).fail(function(j){j.message="LINES.ajax.getLines.fail: "+j.message;f.onError(j);b.reject(j);f.state.isLoading(false);f.progress.hide()});LINES.ajax.session.postSelectLines()});return b.promise()},loadLines:function(){var h=$.makeArray(arguments);var b=h.shift();var c=h.shift();var g=h.shift();var j=h.shift();j=j===undefined?false:j;g=g===undefined?this.isFullPageLoadRequired():g;if(g){var d=LINES.routing.getBetUrl(b,c,$.toJSON(LINES.state.selectedLeagueIds));if(d.charAt(0)=="/"){d=d.substring(1)}var a=LINES.config.virtualDirectory+d;window.location.href=a;return LINES.utils.toEmptyPromise()}var k=$.Deferred();var f=this;this.getLinesPromise(b,c,LINES.state.selectedBuySellLevels,LINES.state.selectedLeagueIds).done(function(l){if(l==null){LINES.helpers.betMenu.state.done();k.resolve();return}try{for(var n in LINES.enums.marketType){LINES.state.timerCountDownMarketRefresh[n]=LINES.config.timerLimitMarketRefresh[n]}LINES.state.urlParams.sportName=b;LINES.state.urlParams.eventFilterName=c;f.state.isRendering(true);LINES.helpers.Sport.processLinesContainer(l,null,j).done(function(){k.resolve()}).fail(function(o){f.onError(o);k.reject(o)}).always(function(){LINES.helpers.betMenu.state.done();var o=LINES.utils.popups.anyOpen(LINES.utils.popups.hoverPopups);LINES.utils.popups.closeAllExcept(LINES.utils.popups.hoverPopups);if(o){LINES.utils.hideLines()}if(l.IsAllowedToChangeOdds===true){$("#oddsFormat").removeProp("disabled")}})}catch(m){m.message="LINES.ajax.getLines.done: "+m.message;f.onError(m);k.reject(m)}});return k.promise()}};LINES.binders.betTicket={confirmTicketSubmit:function(){try{if(!$("#betTicketSubmitContainer").hasClass("hidden")){var a=$("#PendingTicket_TicketItem_StakeAmount");var c=a.parse();if(c<=0){alert(LINES.state.translationsStore["Please enter a wager amount."]);a.focus();return false}else{if($("#ticketPlaced").val()=="false"&&confirm(LINES.state.translationsStore.BetTicketConfirm_Default)){LINES.helpers.betTicket.submitTicket()}}}return false}catch(b){LINES.helpers.betTicket.onError(b);return true}},setMaxPayout:function(d){var c=new Number($("#ticketFormPrice").val());var a=$("#PendingTicket_TicketItem_StakeAmount");var g=$("#betTicketLineType").val();var h=$("#oddsEntry").val().toLowerCase();var j=a.parse();if(isNaN(j)&&a.val()!=""){a.val("");alert(LINES.state.translationsStore["only numbers allowed"]);return false}if((isNaN(j)||j.valueOf()<=0)&&d.type=="focusout"){a.val("");return false}var b=0;var f=0;if((h=="malay"||h=="indonesian"||h=="hongkong")&&g=="moneyline"){h="decimal"}if($("input[name=riskwin]:checked").val()=="w"){b=j;f=LINES.helpers.betTicket.calculateRiskFromWin(b,h,c)}else{f=j;b=LINES.helpers.betTicket.calculateWinFromRisk(f,h,c)}LINES.helpers.betTicket.calculateMaxPayout(f,b)},clearBetTicket:function(){$("#betTicketNotification").addClass("hidden");$("#ticketWagers").addClass("hidden");$("#emptyBetTicket").find(".message").html(LINES.state.translationsStore.BetTicketNote2);$("#emptyBetTicket").removeClass("hidden");var a=$("#ticketClear").attr("href");$.ajax({url:a,context:document.body,error:function(){$("#ticketWagers").removeClass("hidden");$("#emptyBetTicket").addClass("hidden")}});return false},toggleTicketRefresh:function(){if(LINES.state.betTicketTimerEnabled&&!$("#betTicketSubmitContainer").hasClass("hidden")){LINES.state.betTicketTimerEnabled=false;$("#ticketRefresh").find("span").html(LINES.state.translationsStore.refresh)}else{LINES.state.betTicketTimerEnabled=true}}};LINES.helpers.betTicket={enhancedInit:function(){var a=LINES.utils.getParameterByName("line",window.location.hash);if(a!=null){this.addToTicket(a,true,false)}$("#ticketClear").on("click",function(){LINES.utils.dropParameterFromHashTag("line")});$("#TicketContent").on("click","a.removeLink",function(b){b.preventDefault();LINES.binders.betTicket.clearBetTicket()});$("#ticketRefresh").on("click",function(){LINES.binders.betTicket.toggleTicketRefresh();return false});$("#ticketRefresh").on("dblclick",function(){return false});$("#risk").on("click",function(){LINES.helpers.betTicket.showRiskMinAndMax()});$("#win").on("click",function(){LINES.helpers.betTicket.showWinMinAndMax()});$("#chkBetMaximum").on("click",function(){LINES.helpers.betTicket.showMaximumBet(true)});$("#risk").on("click",function(){$("#ticketWagers #isRisk").val("True");LINES.helpers.betTicket.showMaximumBet()});$("#win").on("click",function(){$("#ticketWagers #isRisk").val("False");LINES.helpers.betTicket.showMaximumBet()});$("#PendingTicket_TicketItem_StakeAmount").on("keydown",function(b){if($.browser.msie&&b.keyCode==13){return LINES.binders.betTicket.confirmTicketSubmit()}if(b.keyCode==46||b.keyCode==8||b.keyCode==13||b.keyCode==110||b.keyCode==188||b.keyCode==190){}else{if((b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)){b.preventDefault()}}});$("#PendingTicket_TicketItem_StakeAmount").on("keyup",function(d){var c=$("#PendingTicket_TicketItem_StakeAmount");c.val(c.val().replace(/[^0-9$.,']/g,""));LINES.binders.betTicket.setMaxPayout(d);if(d.keyCode!=13){var b=$("#chkBetMaximum");if(b.is(":checked")){b.attr("checked",false);LINES.helpers.betTicket.showMaximumBet(true)}}});$("#PendingTicket_TicketItem_StakeAmount").on("blur",function(b){if(!LINES.state.betTicketIsRefreshing){if(!isNaN($(this).val().replace(/[^0-9$.']/g,""))){$(this).format({format:"#,##0.00"});LINES.binders.betTicket.setMaxPayout(b)}else{$(this).val("")}}});$("#PendingTicket").on("submit",function(){return LINES.binders.betTicket.confirmTicketSubmit()});$("#ticketWagers").addClass("enhance");$("#BetTicketSubmitButton").addClass("hidden");$("#BetTicketSubmitLink").removeClass("hidden");$("#BetTicketSubmitLink").on("click",function(){return LINES.binders.betTicket.confirmTicketSubmit()})},countDown:function(){var a=$("#ticketRefresh");var b=!($("#ticketWagers").hasClass("hidden")||$("#TicketContent").hasClass("hidden"));if(LINES.state.betTicketTimerEnabled&&a.attr("href")!="/"&&b){LINES.state.timerCountDownTicketRefresh--;if(LINES.state.timerCountDownTicketRefresh==0){LINES.helpers.betTicket.refreshBetTicket("#ticketRefresh")}else{if(LINES.state.timerCountDownTicketRefresh>0){a.find("span").html(LINES.state.translationsStore.refresh+"&nbsp;"+LINES.state.timerCountDownTicketRefresh)}}}else{LINES.state.timerCountDownTicketRefresh=$("#ticketItem").hasClass("live")?LINES.config.timerLimitLiveTicketRefresh:LINES.config.timerLimitTicketRefresh}},calculateRiskFromWin:function(a,d,b){var c=0;switch(d){case"american":if(b<0){c=(a/100*b*-1)}else{if(b!=0){c=(a/b*100)}}break;case"decimal":c=a/(b-1);break;case"hongkong":c=a/b;break;case"malay":case"indonesian":if(b<0){c=a*-(b)}else{if(b!=0){c=a/b}}break;default:}return c.toFixed(4)},calculateWinFromRisk:function(c,d,b){var a=0;switch(d){case"american":if(b<0){a=(c/b*-100)}else{a=(c/100*b)}break;case"decimal":a=c*(b-1);break;case"hongkong":a=c*b;break;case"malay":case"indonesian":if(b<0){a=c/-(b)}else{if(b!=0){a=c*b}}break;default:}return a.toFixed(4)},refreshBetTicket:function(a){try{if($(a).attr("href")!=""){$("#ticketRefresh").find("span").html(LINES.state.translationsStore["Please Wait"]);LINES.helpers.betTicket.addToTicket($(a).attr("href"),true)}return false}catch(b){LINES.helpers.betTicket.onError(b);return true}},submitTicket:function(){$("#ticketPlaced").val("true");var d=$("#PendingTicket_TicketItem_Team1PitcherChecked").prop("checked");var b=$("#PendingTicket_TicketItem_Team2PitcherChecked").prop("checked");var c="";if(d&&!$("#PendingTicket_TicketItem_Team1PitcherChecked").hasClass("hidden")){c+="&PendingTicket_TicketItem_Team1PitcherChecked=true"}if(b&&!$("#PendingTicket_TicketItem_Team2PitcherChecked").hasClass("hidden")){c+="&PendingTicket_TicketItem_Team2PitcherChecked=true"}var a=$("#PendingTicket").serialize()+c;LINES.utils.showLoadingDiv($("#ticketWagers"),"medium","center",true);LINES.ajax.placeBet(a,"json").done(function(f){LINES.helpers.betTicket.processTicketSubmitJson(f)}).fail(function(f){LINES.utils.hideLoadingDiv("ticketWagers");$("#ticketPlaced").val("false");LINES.helpers.betTicket.onError(f)});return false},processTicketSubmitJson:function(a){LINES.utils.hideLoadingDiv("ticketWagers");$("#ticketPlaced").val("false");if(a!=null&&!a.IsAccepted){try{if(!a.IsEmpty&&a.Notification.Message!=""){$("#ticketItem").removeClass("live").removeClass("today").removeClass("early").addClass(a.TicketItem.MarketId.toLowerCase());$("#ticketFormattedPrice").removeClass("highlight").removeClass("neg");$("#ticketFormattedLine").removeClass("highlight");$("#betTicketScoreContainer").removeClass("highlight");if(a.TicketItem.EventLine.Line!=""){$("#ticketFormattedLine").text(a.TicketItem.EventLine.FormattedLine)}if(a.TicketItem.EventLine.Price!=""&&a.TicketItem.EventLine.Price!=0){$("#ticketFormLineId").val(a.TicketItem.LineId);$("#ticketFormBuySellId").val(a.TicketItem.BuySellId);$("#ticketFormPrice").val(a.TicketItem.EventLine.Price);$("#ticketFormFormattedPrice").val(a.TicketItem.EventLine.FormattedPrice);$("#ticketFormattedPrice").text(a.TicketItem.EventLine.FormattedPrice);$("#ticketFormBallPercent").val(a.TicketItem.BallPercent);$("#PendingTicket_TicketItem_StakeAmount").trigger("blur");LINES.helpers.betTicket.checkPriceChange(a,false);if(a.TicketItem.EventLine.Price<0){$("#ticketFormattedPrice").addClass("neg")}else{$("#ticketFormattedPrice").removeClass("neg")}}if(a.TicketItem.MinRisk!=""&&a.TicketItem.MinRisk!=0){$("#ticketFormMinRisk").val(a.TicketItem.MinRisk);$("#ticketFormMinRiskAmount").val(a.TicketItem.MinRiskAmount);$("#ticketMinRisk").text(a.TicketItem.MinRisk)}if(a.TicketItem.MaxRisk!=""&&a.TicketItem.MaxRisk!=0){$("#ticketFormMaxRisk").val(a.TicketItem.MaxRisk);$("#ticketFormMaxRiskAmount").val(a.TicketItem.MaxRiskAmount);$("#ticketMaxRisk").text(a.TicketItem.MaxRisk)}if(a.TicketItem.MinWin!=""&&a.TicketItem.MinWin!=0){$("#ticketFormMinWin").val(a.TicketItem.MinWin);$("#ticketFormMinWinAmount").val(a.TicketItem.MinWinAmount);$("#ticketMinWin").text(a.TicketItem.MinWin)}if(a.TicketItem.MaxWin!=""&&a.TicketItem.MaxWin!=0){$("#ticketFormMaxWin").val(a.TicketItem.MaxWin);$("#ticketFormMaxWinAmount").val(a.TicketItem.MaxWinAmount);$("#ticketMaxWin").text(a.TicketItem.MaxWin)}if(a.TicketItem.RiskOrWin==LINES.enums.ticketRiskOrWin.Risk){LINES.helpers.betTicket.showRiskMinAndMax()}else{LINES.helpers.betTicket.showWinMinAndMax()}LINES.helpers.betTicket.showMaximumBet(false);if(a.Notification.Type==LINES.enums.ticketNotificationType.BelowMinimumWagerAmount){LINES.helpers.betTicket.checkMinimumWager(a.Notification.Message,(a.TicketItem.RiskOrWin==LINES.enums.ticketRiskOrWin.Risk))}if(a.Notification.Type==LINES.enums.ticketNotificationType.AboveMaximumWagerAmount){LINES.helpers.betTicket.checkMaximumWager(a.Notification.Message,(a.TicketItem.RiskOrWin==LINES.enums.ticketRiskOrWin.Risk))}if(a.Notification.Type!=LINES.enums.ticketNotificationType.PriceChanged&&a.Notification.Type!=LINES.enums.ticketNotificationType.PercentChanged&&a.Notification.Type!=LINES.enums.ticketNotificationType.PriceAndPercentChanged&&a.Notification.Type!=LINES.enums.ticketNotificationType.AboveMaximumWagerAmount&&a.Notification.Type!=LINES.enums.ticketNotificationType.BelowMinimumWagerAmount){$("#PendingTicket_TicketItem_StakeAmount").focus();alert(a.Notification.Message)}LINES.state.timerCountDownCustomerBalance=2}else{if(a.Error.Message!=""){$("#emptyBetTicket").removeClass("hidden");$("#emptyBetTicket").find(".message").html(a.Error.Message);$("#ticketWagers").addClass("hidden")}}}catch(b){LINES.helpers.betTicket.onError(b)}}else{if(a.Notification.Message!=""){alert(a.Notification.Message)}LINES.utils.dropParameterFromHashTag("line");$("#betTicketNotification").addClass("hidden");$("#ticketWagers").addClass("hidden");$("#emptyBetTicket").find(".message").html(LINES.state.translationsStore.BetTicketNote2);$("#emptyBetTicket").removeClass("hidden");LINES.state.timerCountDownCustomerBalance=3;if(a!=null&&a.TicketItem.InDangerZone){LINES.state.pendingListHasWagers=true;LINES.helpers.tabs.selectTab(LINES.enums.tab.Pending)}else{LINES.helpers.tabs.selectTab(LINES.enums.tab.Wager)}}},addToTicket:function(){var k=$.Deferred();LINES.state.betTicketIsRefreshing=true;var b=arguments[0];if(b==null||b==""){k.resolve();return k.promise()}var a=arguments[1];var h=true;if(arguments.length>2){h=arguments[2]}try{$("#ticketRefresh").attr("href",b);$("#ticketPlaced").val("false");LINES.state.riskAmount=0;LINES.state.winAmount=0;LINES.helpers.tabs.activateTabWithHash("line",b,h);if(a){var f=$("#PendingTicket_TicketItem_Team1PitcherChecked").prop("checked");var d=$("#PendingTicket_TicketItem_Team2PitcherChecked").prop("checked");if(f){b=b+"&pitcher1=t"}else{b=b+"&pitcher1=f"}if(d){b=b+"&pitcher2=t"}else{b=b+"&pitcher2=f"}b=b+"&riskwin="+$("input[name=riskwin]:checked").val();if($("#PendingTicket_AcceptBetterLines").is(":checked")){b=b+"&betterodds=t"}}var g=function(){if(LINES.state.betTicketIsRefreshing){}var m=$("#ticketFormMarketId").val();if(m==LINES.enums.marketType.Live){LINES.state.timerCountDownTicketRefresh=LINES.config.timerLimitLiveTicketRefresh}else{LINES.state.timerCountDownTicketRefresh=LINES.config.timerLimitTicketRefresh}};var j=setTimeout(function(){var m=LINES.state.translationsStore["Please Wait"]==$("#ticketRefresh").find("span").html();if(m){LINES.utils.log("lines.betticket","Ticket refresh [ABORT] ");g();j=null;if(LINES.state.betTicketIsRefreshing){LINES.state.betTicketIsRefreshing=false;LINES.utils.hideLoadingDiv("ticketWagers")}}},2000);LINES.utils.log("lines.betticket","Ticket refresh [START] "+j);LINES.ajax.post(b,"json").done(function(m){try{LINES.helpers.betTicket.processPendingTicketJson(m,a);$("#PendingTicket_TicketItem_StakeAmount").focus();k.resolve()}catch(n){k.reject(n)}}).fail(function(m){k.reject(m)})}catch(c){k.reject(c)}var l=k.promise();l.fail(function(n){LINES.helpers.betTicket.onError(n);try{g();$("#ticketWagers").addClass("hidden");$("#emptyBetTicket").find(".message").html($("#errorMessageSlim").html());$("#emptyBetTicket .retry").click(function(){LINES.helpers.betTicket.addToTicket(b,a);return false});$("#emptyBetTicket").removeClass("hidden");LINES.helpers.tabs.selectTab(LINES.enums.tab.Ticket)}catch(m){LINES.helpers.betTicket.onError(m)}});l.always(function(){if(LINES.state.betTicketIsRefreshing){LINES.state.betTicketIsRefreshing=false;LINES.utils.hideLoadingDiv("ticketWagers")}LINES.utils.log("lines.betticket","Ticket refresh [END] "+i);if(j!=null){clearTimeout(j)}});return false},processPendingTicketJson:function(c,d){if(c==null){return}var a=c.PendingTicket;try{if(!d){LINES.helpers.tabs.selectTab(LINES.enums.tab.Ticket)}else{if(a.TicketItem.ShowListedPitcherChanged){alert(LINES.state.translationsStore.Error_ListedPitchersSelectionError)}}$("#ticketItem").removeClass("live");$("#ticketItem").removeClass("today");$("#ticketItem").removeClass("early");if(a.Error.Message!=""){$("#emptyBetTicket").removeClass("hidden");$("#emptyBetTicket").find(".message").html(a.Error.Message);LINES.utils.warn("lines.betticket","ticketJson.Error: "+a.TicketItem.EventId+":"+a.Error.Message);$("#ticketWagers").addClass("hidden")}else{$("#betTicketNotification").addClass("hidden");$("#betTicketNotAccepted").addClass("hidden");$("#betTicketItemContainer").removeClass("hidden");$("#betTicketSubmitContainer").removeClass("hidden");$("#betTicketSummary").removeClass("hidden");$("#betTicketPickContainer").removeClass("hidden");$("#ticketItem").addClass(a.TicketItem.MarketId.toLowerCase());$("#ticketFormattedPrice").removeClass("highlight").removeClass("neg");$("#ticketFormattedLine").removeClass("highlight");$("#betTicketScoreContainer").removeClass("highlight");$("#ticketWagers").removeClass("hidden");$("#emptyBetTicket").addClass("hidden");if(a.TicketItem.EventStatus!=LINES.enums.bettingEventStatus.Offline||!d){$("#ticketRefresh").attr("href",LINES.config.virtualDirectory+a.RefreshLink);$("#betTicketSport").text(a.TicketItem.Sport);$("#betTicketLeague").text(a.TicketItem.League);$("#betTicketDate").text(a.TicketItem.StartDate);$("#betTicketLineDesc").text(a.TicketItem.LineDescription);$("#ticketFormattedLine").text(a.TicketItem.EventLine.FormattedLine);$("#ticketFormattedPrice").text(a.TicketItem.EventLine.FormattedPrice);if(a.TicketItem.EventLine.Price<0){$("#ticketFormattedPrice").addClass("neg")}else{$("#ticketFormattedPrice").removeClass("neg")}$("#ticketFormSource").val(a.TicketSource);$("#ticketFormUniqueId").val(a.UniqueId);$("#ticketFormBallPercent").val(a.TicketItem.BallPercent);$("#ticketFormBetType").val(a.TicketItem.BetType);$("#ticketFormBuySellId").val(a.TicketItem.BuySellId);$("#ticketFormBuySellLevel").val(a.TicketItem.BuySellLevel);$("#ticketFormDisplayPick").val(a.TicketItem.DisplayPick);$("#ticketFormEventId").val(a.TicketItem.EventId);$("#ticketFormFormattedPick").val(a.TicketItem.EventLine.FormattedPick);$("#ticketFormPrice").val(a.TicketItem.EventLine.Price);$("#ticketFormFormattedPrice").val(a.TicketItem.EventLine.FormattedPrice);$("#ticketFormLine").val(a.TicketItem.EventLine.Line);$("#ticketFormFormattedLine").val(a.TicketItem.EventLine.FormattedLine);$("#ticketFormEventStatus").val(a.TicketItem.EventStatus);$("#ticketFormLeague").val(a.TicketItem.League);$("#ticketFormLeagueId").val(a.TicketItem.LeagueId);$("#ticketFormLineDescription").val(a.TicketItem.LineDescription);$("#ticketFormLineId").val(a.TicketItem.LineId);$("#ticketFormLineTypeLabel").val(a.TicketItem.LineTypeLabel);$("#ticketFormMarketId").val(a.TicketItem.MarketId);$("#ticketFormMaxRisk").val(a.TicketItem.MaxRisk);$("#ticketFormMaxRiskAmount").val(a.TicketItem.MaxRiskAmount);$("#ticketFormMinRisk").val(a.TicketItem.MinRisk);$("#ticketFormMinRiskAmount").val(a.TicketItem.MinRiskAmount);$("#ticketFormMaxWin").val(a.TicketItem.MaxWin);$("#ticketFormMaxWinAmount").val(a.TicketItem.MaxWinAmount);$("#ticketFormMinWin").val(a.TicketItem.MinWin);$("#ticketFormMinWinAmount").val(a.TicketItem.MinWinAmount);$("#ticketFormOverUnder").val(a.TicketItem.OverUnder);$("#ticketFormPeriod").val(a.TicketItem.Period);$("#ticketFormPeriodDescription").val(a.TicketItem.PeriodDescription);$("#ticketFormPick").val(a.TicketItem.Pick);$("#ticketFormSport").val(a.TicketItem.Sport);$("#ticketFormSportId").val(a.TicketItem.SportId);$("#ticketFormSportType").val(a.TicketItem.SportType);$("#ticketFormStartDate").val(a.TicketItem.StartDate);$("#ticketFormTeam1FavoriteCss").val(a.TicketItem.Team1FavoriteCss);$("#ticketFormTeam1Id").val(a.TicketItem.Team1Id);$("#ticketFormTeam1Name").val(a.TicketItem.Team1Name);$("#ticketFormTeam1Pitcher").val(a.TicketItem.Team1Pitcher);$("#ticketFormTeam1RedCards").val(a.TicketItem.Team1RedCards);$("#ticketFormTeam1Score").val(a.TicketItem.Team1Score);$("#ticketFormTeam2FavoriteCss").val(a.TicketItem.Team2FavoriteCss);$("#ticketFormTeam2Id").val(a.TicketItem.Team2Id);$("#ticketFormTeam2Name").val(a.TicketItem.Team2Name);$("#ticketFormTeam2Pitcher").val(a.TicketItem.Team2Pitcher);$("#ticketFormTeam2RedCards").val(a.TicketItem.Team2RedCards);$("#ticketFormTeam2Score").val(a.TicketItem.Team2Score);$("#ticketMinRisk").text(a.TicketItem.MinRisk);$("#ticketMaxRisk").text(a.TicketItem.MaxRisk);$("#ticketMinWin").text(a.TicketItem.MinWin);$("#ticketMaxWin").text(a.TicketItem.MaxWin);$("span.betCurrency").text(c.CurrencyCode);if(a.TicketItem.RiskOrWin==LINES.enums.ticketRiskOrWin.Risk){LINES.helpers.betTicket.showRiskMinAndMax()}else{LINES.helpers.betTicket.showWinMinAndMax()}LINES.state.timerCountDownTicketRefresh=(a.TicketItem.MarketId==LINES.enums.marketType.Live)?LINES.config.timerLimitLiveTicketRefresh:LINES.config.timerLimitTicketRefresh;if(a.TicketItem.Team1FavoriteCss!=""&&!$("#betTicketTeam1Container").hasClass("fav")){$("#betTicketTeam1Container").addClass("fav")}else{if(a.TicketItem.Team1FavoriteCss==""&&$("#betTicketTeam1Container").hasClass("fav")){$("#betTicketTeam1Container").removeClass("fav")}}if(a.TicketItem.Team2FavoriteCss!=""&&!$("#betTicketTeam2Container").hasClass("fav")){$("#betTicketTeam2Container").addClass("fav")}else{if(a.TicketItem.Team2FavoriteCss==""&&$("#betTicketTeam2Container").hasClass("fav")){$("#betTicketTeam2Container").removeClass("fav")}}$("#betTicketTeam1").html(LINES.utils.insertSoftHyphens(unescape(a.TicketItem.Team1Name),5));if(a.TicketItem.Team1Pitcher!=null&&a.TicketItem.Team1Pitcher!=""){$("#betTicketTeam1Pitcher").text(unescape(a.TicketItem.Team1Pitcher));if($("#betTicketTeam1PitcherContainer").hasClass("hidden")){$("#betTicketTeam1PitcherContainer").removeClass("hidden")}}else{if(!$("#betTicketTeam1PitcherContainer").hasClass("hidden")){$("#betTicketTeam1PitcherContainer").addClass("hidden")}}$("#PendingTicket_TicketItem_Team1PitcherChecked").prop("checked",a.TicketItem.Team1PitcherChecked);$("#betTicketTeam2").html(LINES.utils.insertSoftHyphens(unescape(a.TicketItem.Team2Name),5));if(a.TicketItem.Team2Pitcher!=null&&a.TicketItem.Team2Pitcher!=""){$("#betTicketTeam2Pitcher").text(unescape(a.TicketItem.Team2Pitcher));if($("#betTicketTeam2PitcherContainer").hasClass("hidden")){$("#betTicketTeam2PitcherContainer").removeClass("hidden")}}else{if(!$("#betTicketTeam2PitcherContainer").hasClass("hidden")){$("#betTicketTeam2PitcherContainer").addClass("hidden")}}$("#PendingTicket_TicketItem_Team2PitcherChecked").prop("checked",a.TicketItem.Team2PitcherChecked);$("#ticketFormattedPick").html(unescape(a.TicketItem.EventLine.FormattedPick));$("#betTicketLineType").val(LINES.enums.lineTypeName[a.TicketItem.BetType].toLowerCase());$("#betTicketLineTypeLabel").text(a.TicketItem.LineTypeLabel);if(!a.TicketItem.DisplayPick){$("#betTicketPickContainer").addClass("hidden")}if(a.TicketItem.BetType==LINES.enums.lineType.Moneyline){$("#betTicketLineTypeContainer").addClass("hidden");$("#PendingTicket_TicketItem_Team1PitcherChecked").removeClass("hidden");$("#PendingTicket_TicketItem_Team2PitcherChecked").removeClass("hidden")}else{$("#betTicketLineTypeContainer").removeClass("hidden");if(!$("#PendingTicket_TicketItem_Team1PitcherChecked").hasClass("hidden")){$("#PendingTicket_TicketItem_Team1PitcherChecked").addClass("hidden")}if(!$("#PendingTicket_TicketItem_Team2PitcherChecked").hasClass("hidden")){$("#PendingTicket_TicketItem_Team2PitcherChecked").addClass("hidden")}}if(LINES.config.listedPitchersToggle==true){if(a.TicketItem.ListedPitchersVisibility){$("#PendingTicket_TicketItem_Team1PitcherChecked").removeClass("hidden");$("#PendingTicket_TicketItem_Team2PitcherChecked").removeClass("hidden")}else{$("#PendingTicket_TicketItem_Team1PitcherChecked").addClass("hidden");$("#PendingTicket_TicketItem_Team2PitcherChecked").addClass("hidden")}}if(a.TicketItem.EventStatus!=LINES.enums.bettingEventStatus.Offline&&!(a.TicketItem.Team1Score==null)&&!(a.TicketItem.Team2Score==null)&&a.TicketItem.BetType!=LINES.enums.lineType.Moneyline){if(d!=null&&d&&(($("#betTicketTeam1Score").text()*1)!=a.TicketItem.Team1Score||($("#betTicketTeam2Score").text()*1)!=a.TicketItem.Team2Score)){$("#betTicketScoreContainer").addClass("highlight")}$("#betTicketTeam1Score").text(a.TicketItem.Team1Score);$("#betTicketTeam2Score").text(a.TicketItem.Team2Score);$("#betTicketScoreContainer").removeClass("hidden")}else{if(!$("#betTicketScoreContainer").hasClass("hidden")){$("#betTicketScoreContainer").addClass("hidden")}}$("#betTicketOverUnder").text(a.TicketItem.OverUnder);$("#InDangerZone").val(a.TicketItem.InDangerZone);if(d!=null&&d){$("#PendingTicket_TicketItem_StakeAmount").trigger("blur")}else{$("#PendingTicket_TicketItem_StakeAmount").val("");$("#ticketMaxPayout").text("")}$("#chkBetMaximum").attr("checked",a.BetMaximum);LINES.helpers.betTicket.showMaximumBet(false);LINES.helpers.betTicket.checkPriceChange(a,d)}}}catch(b){LINES.helpers.betTicket.onError(b)}},checkMinimumWager:function(c,a){var b;if(!a){b=new Number($("#ticketFormMinWinAmount").val())}else{b=new Number($("#ticketFormMinRiskAmount").val())}var d=$("#PendingTicket_TicketItem_StakeAmount");d.val(b);d.format({format:"#,##0.00"});d.trigger("blur");d.focus();alert(c);return true},checkMaximumWager:function(c,b){var a;if(!b){a=new Number($("#ticketFormMaxWinAmount").val())}else{a=new Number($("#ticketFormMaxRiskAmount").val())}var d=$("#PendingTicket_TicketItem_StakeAmount");d.val(a);d.format({format:"#,##0.00"});d.trigger("blur");d.focus();alert(c);return true},callbackToggleTicketInfo:function(a){$(a).parent().siblings(".addInfo").is(":visible")?$(a).children().html(LINES.state.translationsStore["full details"]):$(a).children().html(LINES.state.translationsStore["less details"])},calculateMaxPayout:function(b,a){var c=new Number(b)+new Number(a);c=(Math.floor(c*100)/100).toFixed(2);if(c>0){$("#ticketMaxPayout").text(c).format({format:"#,##0.00"})}else{$("#ticketMaxPayout").text("")}},checkPriceChange:function(a,b){if(a.Notification.Type==LINES.enums.ticketNotificationType.PriceChanged||a.Notification.Type==LINES.enums.ticketNotificationType.PercentChanged||a.Notification.Type==LINES.enums.ticketNotificationType.PriceAndPercentChanged){$("#ticketRefresh").attr("href",LINES.config.virtualDirectory+a.RefreshLink);switch(a.Notification.Type){case LINES.enums.ticketNotificationType.PriceChanged:$("#ticketFormattedPrice").addClass("highlight");break;case LINES.enums.ticketNotificationType.PercentChanged:$("#ticketFormattedLine").addClass("highlight");break;case LINES.enums.ticketNotificationType.PriceAndPercentChanged:$("#ticketFormattedLine").addClass("highlight");$("#ticketFormattedPrice").addClass("highlight");break;default:}if(b==null||!b){alert(a.Notification.Message)}}},showRiskMinAndMax:function(){var b=$("#betTicketSummary");b.find(".minrisk").removeClass("hidden");b.find(".maxrisk").removeClass("hidden");b.find(".minwin").addClass("hidden");b.find(".maxwin").addClass("hidden");$("#risk").attr("checked",true);$("#ticketWagers #isRisk").val("True");var a=jQuery.Event("blur");LINES.binders.betTicket.setMaxPayout(a)},showWinMinAndMax:function(){var b=$("#betTicketSummary");b.find(".minrisk").addClass("hidden");b.find(".maxrisk").addClass("hidden");b.find(".minwin").removeClass("hidden");b.find(".maxwin").removeClass("hidden");$("#win").attr("checked",true);$("#ticketWagers #isRisk").val("False");var a=jQuery.Event("blur");LINES.binders.betTicket.setMaxPayout(a)},showMaximumBet:function(b){var c=$("#chkBetMaximum").is(":checked");var a=$("#PendingTicket_TicketItem_StakeAmount");if(c){var d=$("#betTicketSummary");if($("#ticketWagers #isRisk").val()=="True"){a.val(d.find("#ticketMaxRisk").html());LINES.helpers.betTicket.showRiskMinAndMax()}else{a.val(d.find("#ticketMaxWin").html());LINES.helpers.betTicket.showWinMinAndMax()}}if(b){$.ajax({type:"POST",data:"isChecked="+c,url:LINES.config.virtualDirectory+"AsiaSession/SelectBetMaximum"})}}};LINES.helpers.betTicket.onError=function(a){LINES.logError(a);LINES.utils.error("lines.betticket",a)};LINES.helpers.Event=function(b,c,g,a,j,h,f){this.oddsFormat=LINES.state.oddsFormat;this.sportId=b;this.leagueId=c;this.cssViewType=f;this.isUpdate=h;this.uniqueEventId=g;var d=LINES.helpers.Event.getUniqueEventIdPieces(g);this.marketType=d.marketType;this.uniqueLeagueId=LINES.helpers.League.getUniqueLeagueId(this.marketType,b,c);this.eventHtmlHelper=new LINES.helpers.EventHtml(this.sportId,this.leagueId,this.uniqueEventId,a,j,f)};LINES.helpers.Event.prototype.exists=function(){return this.eventHtmlHelper.exists()};LINES.helpers.Event.prototype.removeEvent=function(){LINES.helpers.EventHtml.removeEvent(this.uniqueEventId)};LINES.helpers.Event.prototype.getStartTime=function(){return this.eventHtmlHelper.getStartTime()};LINES.helpers.Event.prototype.getRotationNumber=function(){return this.eventHtmlHelper.getRotationNumber()};LINES.helpers.Event.prototype.updateRow=function(k){this.eventHtmlHelper.highlightScoreChange(k.DispDate).setStartTime(k.DispDate,k.Date).setAlternateLineNumber(k.Alt).setTeams(k.TmH,k.TmA).setRotationNumber(k.Rot);var X=this.eventHtmlHelper.getWagerDataMap();var u=k.WagerMap;var Q=this.eventHtmlHelper.domElements.rows[0].domElement;if(this.cssViewType==LINES.enums.cssViewType.Moneyline){for(var O=0;O<=1;O++){var C=O*3;var I=$(X[C]).attr("href");var V=$(u[C]).attr("href");if(I!=V){Q.find(".pos"+O+".Handicap").html(u[C]);if(this.isUpdate){Q.find(".pos"+O+".Handicap").removeClass("nochange").addClass("highlight")}else{if(!Q.find(".pos"+O+".Handicap").hasClass("nochange")){Q.find(".pos"+O+".Handicap").addClass("nochange")}}}else{var l=Q.find(".pos"+O+".Handicap");l.removeClass("highlight").addClass("nochange")}for(var z=1;z<=2;z++){I=$(X[C+z]).attr("href");V=$(u[C+z]).attr("href");if(I!=V){var l=Q.find(".pos"+O+".T"+z);l.html(u[C+z]);if(this.isUpdate){l.removeClass("nochange").addClass("highlight")}else{l.removeClass("highlight").addClass("nochange")}}else{var l=Q.find(".pos"+O+".T"+z);l.removeClass("highlight").addClass("nochange")}}}}else{if(this.cssViewType==LINES.enums.cssViewType.Double){var L=this.eventHtmlHelper.getSpreadWagerDataMap();var Y=k.SpWagerMap;var h=this.eventHtmlHelper.getTotalWagerDataMap();var B=k.TotWagerMap;var A=2;this.eventHtmlHelper.setDraw(k.TmD);for(var O=0;O<A;O++){var C=O*3;var H=(k.TmD!="");for(var r=0;r<=3;r++){var I=$(X[C+r]).attr("href");var V=$(u[C+r]).attr("href");var j=u[C+r];var K=Q.find(".moneyline .pos"+O+".T"+r);this.updateMoneylineLink(I,V,j,K,this.isUpdate,H)}if(!H){Q.find(".moneyline .pos"+O+".T0").addClass("hidden")}else{Q.find(".moneyline .pos"+O+".T0").removeClass("hidden")}if(B[C]==""){Q.find(".total .pos"+O+".ou").addClass("hidden")}else{Q.find(".total .pos"+O+".ou").removeClass("hidden")}var m=(O*4);var N=Q.find(".spread .pos"+O+".Handicap");var M=this.updateHandicap(L[m],Y[m],N.eq(0),this.isUpdate);var D=this.updateHandicap(L[m+2],Y[m+2],N.eq(1),this.isUpdate);var R=(M||D);var g=m+1;var w=$(L[g]).attr("href");var n=$(Y[g]).attr("href");var p=$(Y[g]);var f=Q.find(".spread .pos"+O+".T1");this.updatePrice(w,n,p,f,R,this.isUpdate);g=m+3;w=$(L[g]).attr("href");n=$(Y[g]).attr("href");p=$(Y[g]);f=Q.find(".spread .pos"+O+".T3");this.updatePrice(w,n,p,f,R,this.isUpdate);var b=Q.find(".total .pos"+O+".Handicap");var ab=this.updateHandicap(h[C],B[C],b,this.isUpdate);for(var z=1;z<=2;z++){var a=$(h[C+z]).attr("href");var o=$(B[C+z]).attr("href");var J=$(B[C+z]);var T=Q.find(".total .pos"+O+".T"+z);this.updatePrice(a,o,J,T,ab,this.isUpdate)}}}else{if(this.cssViewType==LINES.enums.cssViewType.Taiwan){var v=this.eventHtmlHelper.getTwTotalWagerDataMap();var t=k.TwTotWagerMap;var d=this.eventHtmlHelper.getTwSpreadWagerDataMap();var c=k.TwSpWagerMap;var L=this.eventHtmlHelper.getSpreadWagerDataMap();var Y=k.SpWagerMap;var G=Q.find(".twspread .pos0.Handicap");var W=this.updateTwHandicap(d[0],c[0],G.eq(0),this.isUpdate);var P=this.updateTwHandicap(d[2],c[2],G.eq(1),this.isUpdate);var Z=(W||P);this.eventHtmlHelper.setDraw(k.TmD);var N=Q.find(".spread .pos0.Handicap");var M=this.updateHandicap(L[0],Y[0],N.eq(0),this.isUpdate);var D=this.updateHandicap(L[2],Y[2],N.eq(1),this.isUpdate);var R=(M||D);if(t[0]==""){Q.find(".twtotal .pos0.ou").addClass("hidden")}else{Q.find(".twtotal .pos0.ou").removeClass("hidden")}var b=Q.find(".twtotal .pos0.Handicap");var y=this.updateHandicap(v[0],t[0],b.eq(0),this.isUpdate);var S=this.updateHandicap(v[2],t[2],b.eq(1),this.isUpdate);var ab=(y||S);for(var z=1;z<=3;z=z+2){var U=$(d[z]).attr("href");var q=$(c[z]).attr("href");var s=$(c[z]);var E=Q.find(".twspread .pos0.T"+z);this.updateTwPrice(U,q,s,E,Z,this.isUpdate);var a=$(v[z]).attr("href");var o=$(t[z]).attr("href");var J=$(t[z]);var T=Q.find(".twtotal .pos0.T"+z);this.updatePrice(a,o,J,T,ab,this.isUpdate);var w=$(L[z]).attr("href");var n=$(Y[z]).attr("href");var p=$(Y[z]);var f=Q.find(".spread .pos0.T"+z);this.updatePrice(w,n,p,f,R,this.isUpdate)}var H=(k.TmD!="");for(var r=0;r<3;r++){var I=$(X[r]).attr("href");var V=$(u[r]).attr("href");var j=u[r];var K=Q.find(".moneyline .pos0.T"+r);this.updateMoneylineLink(I,V,j,K,this.isUpdate,H)}if(!H){Q.find(".moneyline .pos0.T0").addClass("hidden")}else{Q.find(".moneyline .pos0.T0").removeClass("hidden")}}else{var A=(this.cssViewType==LINES.enums.cssViewType.Single)?4:2;for(var O=0;O<A;O++){var aa=false;var C=O*3;if(X[C]!=u[C]){var l=Q.find(".pos"+O+".Handicap");l.removeClass("highlight").removeClass("nochange");l.html(u[C]);aa=(this.isUpdate)?true:false}else{var l=Q.find(".pos"+O+".Handicap");l.removeClass("highlight").addClass("nochange")}for(var z=1;z<=2;z++){var I=$(X[C+z]).attr("href");var V=$(u[C+z]).attr("href");var F=$(u[C+z]).html();if(I!=V||aa){var l=Q.find(".pos"+O+".T"+z);l.html(u[C+z]);if(this.isUpdate&&F!="&nbsp;"){l.removeClass("nochange").addClass("highlight")}else{if(this.isUpdate&&F=="&nbsp;"){l.removeClass("highlight").addClass("nochange")}else{if(!this.isUpdate&&l.hasClass("highlight")){l.removeClass("highlight").addClass("nochange")}}}}else{if((aa&&this.exists())||(!this.exists()&&this.isUpdate&&F!="&nbsp;")){Q.find(".pos"+O+".T"+z).removeClass("nochange").addClass("highlight")}else{var l=Q.find(".pos"+O+".T"+z);l.removeClass("highlight").addClass("nochange")}}}}}}}return{domElements:this.eventHtmlHelper.domElements}};LINES.helpers.Event.prototype.updateMoneylineLink=function(g,c,a,b,f,d){if(g!=c){b.html(a);if(f){if(!LINES.helpers.Event.isEmptyLink(g)&&!LINES.helpers.Event.isEmptyLink(c)){var j=LINES.helpers.Event.getPriceLineFromHref(g);var h=LINES.helpers.Event.getPriceLineFromHref(c);LINES.helpers.Event.lineChangeDirection(j,h,d);if(h.direction==LINES.enums.lineChangeDirection.Better){b.addClass("better").removeClass("worse")}else{if(h.direction==LINES.enums.lineChangeDirection.Worse){b.addClass("worse").removeClass("better")}}}if(!LINES.helpers.Event.isEmptyLink(c)){b.removeClass("nochange").addClass("highlight")}else{b.removeClass("highlight").addClass("nochange")}}else{b.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}}else{b.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}};LINES.helpers.Event.prototype.updateHandicap=function(a,b,f,d){var c=false;if(a!=b){f.removeClass("highlight").removeClass("nochange");f.html(b);c=(d&&(b!="&nbsp;"&&$.trim(b)!=""))?true:false}else{f.removeClass("highlight").addClass("nochange")}return c};LINES.helpers.Event.prototype.updateTwHandicap=function(a,b,f,d){var c=false;if(a!=b){f.removeClass("highlight").removeClass("nochange");f.html(b);c=(d&&(b!="&nbsp;"&&$.trim(b)!=""))?true:false;if(c){f.addClass("highlight")}}else{f.removeClass("highlight").addClass("nochange")}return c};LINES.helpers.Event.prototype.updatePrice=function(g,a,d,f,c,b){if(g!=a||c){f.html(d);if(b&&(d.html()!="&nbsp;"&&$.trim(d.html())!="")){if(!LINES.helpers.Event.isEmptyLink(g)&&!LINES.helpers.Event.isEmptyLink(a)){var j=LINES.helpers.Event.getPriceLineFromHref(g);var h=LINES.helpers.Event.getPriceLineFromHref(a);LINES.helpers.Event.lineChangeDirection(j,h,false);if(h.direction==LINES.enums.lineChangeDirection.Better){f.addClass("better").removeClass("worse")}else{if(h.direction==LINES.enums.lineChangeDirection.Worse){f.addClass("worse").removeClass("better")}}}f.removeClass("nochange").addClass("highlight")}else{if(!b){f.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}else{if(d.html()=="&nbsp;"||$.trim(d.html())==""){f.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}}}}else{if((c&&this.exists())||(!this.exists()&&b&&!LINES.helpers.Event.isEmptyLink(a))){f.removeClass("nochange").addClass("highlight")}else{f.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}}};LINES.helpers.Event.prototype.updateTwPrice=function(h,c,j,a,k,m){if(h!=c||k){a.html(j);if(m&&(j.html()!="&nbsp;"&&$.trim(j.html())!="")){if(!LINES.helpers.Event.isEmptyLink(h)&&!LINES.helpers.Event.isEmptyLink(c)){var b=LINES.helpers.Event.getPriceLineFromHref(h);var l=LINES.helpers.Event.getPriceLineFromHref(c);LINES.helpers.Event.lineChangeDirection(b,l,false);var f=parseInt(purl(h).param("bp"));var g=parseInt(purl(c).param("bp"));var d=LINES.enums.lineChangeDirection.NoChange;if(f!=g){if(f<g){d=LINES.enums.lineChangeDirection.Better}else{d=LINES.enums.lineChangeDirection.Worse}}if((l.direction==LINES.enums.lineChangeDirection.Better&&d==LINES.enums.lineChangeDirection.Better)||(l.direction==LINES.enums.lineChangeDirection.NoChange&&d==LINES.enums.lineChangeDirection.Better)||(l.direction==LINES.enums.lineChangeDirection.Better&&d==LINES.enums.lineChangeDirection.NoChange)){a.addClass("better").removeClass("worse")}else{if(l.direction==LINES.enums.lineChangeDirection.Worse||d==LINES.enums.lineChangeDirection.Worse){a.addClass("worse").removeClass("better")}}}a.removeClass("nochange").addClass("highlight")}else{if(!m){a.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}else{if(j.html()=="&nbsp;"||$.trim(j.html())==""){a.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}}}}else{if((k&&this.exists())||(!this.exists()&&m&&!LINES.helpers.Event.isEmptyLink(c))){a.removeClass("nochange").addClass("highlight")}else{a.removeClass("highlight").removeClass("better").removeClass("worse").addClass("nochange")}}};LINES.helpers.Event.enhancedInit=function(){var a=$("#lines_area");a.on("click","td.pos0",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click","td.pos1",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click","td.pos2",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click","td.pos3",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click","div.pos0",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click","div.pos1",function(){LINES.helpers.Event.clickPriceDiv(this)});a.on("click dblclick","a.wLnk",function(b){b.preventDefault()});a.on("click dblclick","a.pLnk",function(b){b.preventDefault()});a.on("click","td.alt",function(){LINES.helpers.selectLeagues.closeHtml();return LINES.helpers.alternateLines.open(this)});a.on("click dblclick","td.alt a",function(b){b.preventDefault()})};LINES.helpers.Event.getUniqueEventIdPieces=function(f){if(f==undefined||typeof f!="string"){throw"Event.getUniqueEventIdPieces: uniqueEventId is undefined or not a string."}var d=f.split("_");var b=d[0];var c=d[1];var a=d[2];return{marketType:b,eventId:c,buySellLevel:a}};LINES.helpers.Event.getUniqueEventId=function(b,c,a){return b+"_"+c+"_"+a};LINES.helpers.Event.updateEventNoChange=function(a,c,b){var d=2;switch(b){case LINES.enums.cssViewType.Single:d=4;break;case LINES.enums.cssViewType.Taiwan:d=1;break;default:break}var h=a+"_"+c;if(LINES.state.nochangeStore.hasId(a,h)){return}var f="."+h+"-Row";var g=$(f).get();if(!$(g).exists()){return}$.each(g,function(l,m){var k=$(m);k.children(":first").removeClass("highlight");for(var j=0;j<d;j++){var n=k.find(".pos"+j+".T1");n.removeClass("highlight").addClass("nochange");n=k.find(".pos"+j+".T2");n.removeClass("highlight").addClass("nochange");if(b!=LINES.enums.cssViewType.Double&&b!=LINES.enums.cssViewType.Taiwan){continue}n=k.find(".pos"+j+".T0");n.removeClass("highlight").addClass("nochange");n=k.find(".pos"+j+".T3");n.removeClass("highlight").addClass("nochange")}if(b!=LINES.enums.cssViewType.Moneyline){return}var o=k.find(".pos0.Handicap");if(o.find("a").exists()){o.removeClass("highlight").addClass("nochange")}o=k.find(".pos1.Handicap");if(o.find("a").exists()){o.removeClass("highlight").addClass("nochange")}});LINES.state.nochangeStore.add(a,a+"_"+c)};LINES.helpers.Event.clickPriceDiv=function(f){try{var b=$(f).find("a");if($(b).exists()){if($(b).hasClass("pLnk")){PSPARLAYTICKET.addLeg($(b).attr("href"));LINES.helpers.tabs.selectTab(LINES.enums.tab.Ticket);return false}var a=$(b).attr("href");if(a!=undefined){var c=a.substr(a.length-1,1);if(a!=""&&a!="#"&&c!="#"){$("#parlayTicketContainer").addClass("hidden");$("#ticketWagers").removeClass("hidden");$("#emptyBetTicket").addClass("hidden");LINES.utils.showLoadingDiv($("#ticketWagers"),"medium","center",true);LINES.helpers.betTicket.addToTicket($(b).attr("href"))}}}return false}catch(d){LINES.utils.hideLoadingDiv("ticketWagers");LINES.logError(d);return true}};LINES.helpers.Event.isEmptyLink=function(a){return(a==undefined||a.substr(a.length-1,1)=="#")?true:false};LINES.helpers.Event.getPriceLineFromHref=function(a){var j="Bet/Add/";var b=a.indexOf(j);a=a.substr(b+j.length);var c=a.split("/");var k;var f=5;if(c[f].indexOf("&")>0){k=c[f].substring(c[f].indexOf("line=")+5,c[f].indexOf("&"))}else{k=c[f].substr(c[f].indexOf("line=")+5)}var d=c[f].substr(0,c[f].indexOf("?"));var g=c[f-2];var h=new LINES.dto.PriceLine(k,d,g);return h};LINES.helpers.Event.lineChangeDirection=function(h,g,b){var d=LINES.enums.lineChangeDirection.NoChange;var f=1;if(LINES.state.oddsFormat==LINES.enums.oddsFormat.Malay&&!(g.lineType==LINES.enums.lineType.Moneyline&&b)){if(!(h.price<0&&g.price<0)&&!(h.price>0&&g.price>0)){f=-1}}var a=h.price*f;var c=g.price*f;if(g.lineType==LINES.enums.lineType.Moneyline){if(a!=c){if(a<c){d=LINES.enums.lineChangeDirection.Better}else{if(a>c){d=LINES.enums.lineChangeDirection.Worse}else{d=LINES.enums.lineChangeDirection.Highlight}}}}else{if(h.line==g.line){if(a<c){d=LINES.enums.lineChangeDirection.Better}else{if(a>c){d=LINES.enums.lineChangeDirection.Worse}}}else{d=LINES.enums.lineChangeDirection.Highlight}}g.direction=d;return g};LINES.helpers.EventHtml=function(k,h,c,d,a,b){this.template=LINES.state.template;this.sportId=k;this.sportName=a;this.leagueId=h;this.cssViewType=b;this.isNewLeague=d;this.uniqueEventId=c;var g=LINES.helpers.Event.getUniqueEventIdPieces(c);this.marketType=g.marketType;this.changeStatus;this.buySellLevel=g.buySellLevel;this.domElements={rows:{},isAttachedToDOM:false};var j=this;this.eventToHtml=function(){var v;if(this.cssViewType==LINES.enums.cssViewType.Single){if(this.template.singleEventRows!=undefined){v=this.template.singleEventRows}else{var u=$("#templateDiv").find(".sportContainer .MarketContainer .LeagueContainer").clone();var q=u.find("tr:gt(0)");var m=q.find(".teamId");if(m!=undefined&&m.html()!=undefined){m.html(m.html().replace("-vs-","<br/>"))}var p=$(q.find(".pos0.Handicap").first().clone()).removeClass("pos0").addClass("pos2");var o=$(q.find(".pos0.T1").first().clone()).removeClass("pos0").addClass("pos2");var n=$(q.find(".pos0.T2").first().clone()).removeClass("pos0").addClass("pos2");q.find(".alt").before(p);q.find(".alt").before(o);q.find(".alt").before(n);p=$(q.find(".pos1.Handicap").first().clone()).removeClass("pos1").addClass("pos3");o=$(q.find(".pos1.T1").first().clone()).removeClass("pos1").addClass("pos3");n=$(q.find(".pos1.T2").first().clone()).removeClass("pos1").addClass("pos3");q.find(".alt").before(p);q.find(".alt").before(o);q.find(".alt").before(n);v=q.get();this.template.singleEventRows=v}}else{if(this.cssViewType==LINES.enums.cssViewType.Moneyline){if(this.template.moneylineEventRows!=undefined){v=this.template.moneylineEventRows}else{var u=$("#templateDiv").find(".sportContainer .MarketContainer .LeagueContainer").clone();var q=u.find("tr:gt(0)");q.find(".pos1.Handicap").html(LINES.helpers.EventHtml.emptyLink());q.find(".pos1.T1").html(LINES.helpers.EventHtml.emptyLink());q.find(".pos1.T2").html(LINES.helpers.EventHtml.emptyLink());v=q.get();this.template.moneylineEventRows=v}}else{if(this.cssViewType==LINES.enums.cssViewType.Double){if(this.template.doubleEventRows!=undefined){v=this.template.doubleEventRows}else{v=$("#doubleLineTemplate").clone().find("tr").get();this.template.doubleEventRows=v}}else{if(this.cssViewType==LINES.enums.cssViewType.Taiwan){if(this.template.taiwanEventRows!=undefined){v=this.template.taiwanEventRows}else{v=$("#taiwanLineTemplate").clone().find("tr").get();this.template.taiwanEventRows=v}}else{if(this.template.eventRows!=undefined){v=this.template.eventRows}else{var u=$("#templateDiv").find(".sportContainer .MarketContainer .LeagueContainer").clone();v=u.find("tr:gt(0)").get();this.template.eventRows=v}}}}}var t=[];var s=[];t[0]=$($(v[0]).clone());var r=LINES.helpers.Event.getUniqueEventIdPieces(this.uniqueEventId);t[0].attr("id",this.uniqueEventId).addClass(r.marketType+"_"+r.eventId+"-Row");s.push(t[0].get());return $(s)};var l=function(){var m=[];var n=$("#"+j.uniqueEventId);if(n.length<1){m=j.eventToHtml()}else{m.push(n.get());m=$(m)}return m}();this.domElements.isAttachedToDOM=$("#"+j.uniqueEventId).exists();for(var f=0;f<l.length;f++){this.domElements.rows[f]={domElement:$(l[f])}}};LINES.helpers.EventHtml.prototype.exists=function(){return LINES.helpers.EventHtml.doesEventExist(this.uniqueEventId)};LINES.helpers.EventHtml.prototype.setStartTime=function(b,a){if(b!=null&&b!=""){this.domElements.rows[0].domElement.find(".sTime").html(b);this.domElements.rows[0].domElement.find(".hTime").html(a)}return this};LINES.helpers.EventHtml.prototype.highlightScoreChange=function(c){if(c!=null&&c!=""&&this.marketType=="Live"){var a=c.substr(c.indexOf(">")).replace("&#8209;","");a=a.replace("","");var b=this.domElements.rows[0].domElement.find(".sTime").html();if(b!=undefined){b=b.substr(b.indexOf(">")).replace("&#8209;","");b=b.replace("","");if(b!=""&&a!=""&&b!=a){this.domElements.rows[0].domElement.children(":first").addClass("highlight")}else{if(b!=""){this.domElements.rows[0].domElement.children(":first").removeClass("highlight")}}}}return this};LINES.helpers.EventHtml.prototype.getStartTime=function(){return this.domElements.rows[0].domElement.find(".hTime").html()};LINES.helpers.EventHtml.prototype.setTeams=function(d,a){for(var h in LINES.enums.homeAway){var b=(h==LINES.enums.homeAway.Home)?d:a;var g;var c=b.Txt+b.Pd;if(b.Ex==null||b.Ex==""){g=""}else{if(b.Ex=="1"){g=" <span class='extra1'></span>"}else{if(!isNaN(b.Ex)){g=" <span class='extra2'></span>"}else{g=" "+b.Ex;c+=" "+b.Ex}}}var k=b.Txt+b.Pd+g;var j=this.getTeamId(h);var f=this.domElements.rows[0].domElement.find(".teamId ."+h);if(k!=j){f.html(k);f.attr("title",c)}if(b.Fc=="fav"){if(!f.hasClass("fav")){f.addClass("fav")}}else{if(b.Fc==""){if(f.hasClass("fav")){f.removeClass("fav")}}}}return this};LINES.helpers.EventHtml.prototype.setDraw=function(a){var b=this.domElements.rows[0].domElement.find(".teamId .Draw");if(a!=""){b.html(a).removeClass("hidden")}else{b.addClass("hidden")}return this};LINES.helpers.EventHtml.prototype.getTeamId=function(a){var b=this.domElements.rows[0].domElement.find(".teamId ."+a).html();return b};LINES.helpers.EventHtml.prototype.htmlArrayBuilder=function(a){if(a==undefined){a=this.domElements.rows[0].domElement}return(function(d){var b=[];var c=this;this.domElement=d;this.add=function(){$.each(arguments,function(g,f){b.push(c.domElement.find(f).html())});return c};this.result=function(){return b};return this})(a)},LINES.helpers.EventHtml.prototype.getWagerDataMap=function(){var a=this.htmlArrayBuilder();if(this.cssViewType==LINES.enums.cssViewType.Double){a.add(".moneyline .pos0.Draw",".moneyline .pos0.Home",".moneyline .pos0.Away",".moneyline .pos1.Draw",".moneyline .pos1.Home",".moneyline .pos1.Away")}else{if(this.cssViewType==LINES.enums.cssViewType.Taiwan){a.add(".moneyline .pos0.Draw",".moneyline .pos0.Home",".moneyline .pos0.Away")}else{a.add(".pos0.Handicap",".pos0.Home",".pos0.Away",".pos1.Handicap",".pos1.Over",".pos1.Under");if(this.cssViewType==LINES.enums.cssViewType.Single){a.add(".pos2.Handicap",".pos2.Home",".pos2.Away",".pos3.Handicap",".pos3.Over",".pos3.Under")}}}return a.result()};LINES.helpers.EventHtml.prototype.getSpreadWagerDataMap=function(){var a=this.htmlArrayBuilder();a.add(".spread .pos0.T0",".spread .pos0.T1",".spread .pos0.T2",".spread .pos0.T3");if(this.cssViewType==LINES.enums.cssViewType.Double){a.add(".spread .pos1.T0",".spread .pos1.T1",".spread .pos1.T2",".spread .pos1.T3")}return a.result()};LINES.helpers.EventHtml.prototype.getTotalWagerDataMap=function(){var a=this.htmlArrayBuilder();a.add(".total .pos0.Handicap",".total .pos0.Over",".total .pos0.Under",".total .pos1.Handicap",".total .pos1.Over",".total .pos1.Under");return a.result()};LINES.helpers.EventHtml.prototype.getTwSpreadWagerDataMap=function(){var a=this.htmlArrayBuilder();a.add(".twspread .pos0.T0",".twspread .pos0.T1",".twspread .pos0.T2",".twspread .pos0.T3");return a.result()};LINES.helpers.EventHtml.prototype.getTwTotalWagerDataMap=function(){var a=this.htmlArrayBuilder();a.add(".twtotal .pos0.Handicap.T0",".twtotal .pos0.Over",".twtotal .pos0.Handicap.T2",".twtotal .pos0.Under");return a.result()};LINES.helpers.EventHtml.prototype.setAlternateLineNumber=function(a){$.each(this.domElements.rows,function(b,c){c.domElement.find(".alt").html(a)});return this};LINES.helpers.EventHtml.prototype.setRotationNumber=function(b){var a=this.getRotationNumber();if(b!=a){this.domElements.rows[0].domElement.find(".rot").html(b)}return this};LINES.helpers.EventHtml.prototype.getRotationNumber=function(){return this.domElements.rows[0].domElement.find(".rot").html()};LINES.helpers.EventHtml.doesEventExist=function(a){if(document.getElementById(a)){return true}return false};LINES.helpers.EventHtml.removeEvent=function(b){$("#"+b).remove();var a=LINES.helpers.Event.getUniqueEventIdPieces(b);LINES.state.nochangeStore.remove(a.marketType,a.marketType+"_"+a.eventId)};LINES.helpers.EventHtml.emptyLink=function(){return'<a href="#" class="wLnk">&nbsp;</a>'};LINES.helpers.fullBetList={enhancedInit:function(){$("#linkFullBetList").click(function(){LINES.helpers.fullBetList.open();return false});var b=$("#FullBetList");b.on("click",".close",function(){LINES.helpers.fullBetList.close();return false});b.on("click",".refresh",function(){LINES.helpers.fullBetList.buildHashUrl();return false});b.on("click",".betListFilter",function(c){LINES.helpers.fullBetList.filter(this,c);return false});b.on("click",".buttonsContainer a",function(){LINES.helpers.statement.open();return false});$(document).on("mousemove","#ui-datepicker-div.ui-weekpicker .ui-datepicker-calendar tr",function(){$(this).find("td a").addClass("ui-state-hover")});$(document).on("mouseleave","#ui-datepicker-div.ui-weekpicker .ui-datepicker-calendar tr",function(){$(this).find("td a").removeClass("ui-state-hover")});$(document).on("click","#ui-datepicker-div.ui-monthpicker .ui-datepicker-month",function(){LINES.helpers.fullBetList.selectMonth();return false});$(document).on("click","#ui-datepicker-div.ui-monthpicker .ui-datepicker-year",function(){LINES.helpers.fullBetList.selectMonth();return false});if(LINES.state.culture!="en-US"&&!($.datepicker.regional[LINES.state.culture])){$LAB.script(cdnRoot+"Static/Scripts/localization/jquery.ui.datepicker-"+LINES.state.culture+".js").wait()}$("#FullBetList").on("click",".retry",function(){LINES.helpers.fullBetList.refresh();return false});var a=LINES.utils.getParameterByName("fullBetList",window.location.hash);if(!a){return}LINES.helpers.fullBetList.open(a)},isOpen:function(){return !($("#FullBetList").hasClass("hidden"))},open:function(b,a){LINES.utils.popups.closeAllExcept("fullBetList");LINES.utils.hideLines();$("#FullBetList").removeClass("hidden");if(b==undefined){b=LINES.config.virtualDirectory+"Asia/BetList/GetFull/"+LINES.enums.betListDuration.Running+"?customerId="+LINES.state.customerId}LINES.helpers.fullBetList.refresh(b,a)},refresh:function(f,g){var d=false;var h=$("#FullBetList");var m;if(!h.find(".partialbox").exists()){h.addClass("partialOuterBorder");LINES.utils.showLoadingDiv(h,"medium")}else{h.removeClass("partialOuterBorder");LINES.utils.showLoadingDiv(h.find(".content"),"medium")}if(g==undefined){g=$("#betListFilter").val();if(g==undefined){if(f!=null&&f!=""){var b=f.split("/");for(var l=0;l<b.length;l++){if(b[l]!="GetFull"||b[l+1]==undefined){continue}var k=b[l+1].split("?");g=k.length>1?k[0]:b[l+1];break}}else{g=LINES.enums.betListDuration.Running}}}else{d=true}var c="test=test";if(d==false&&$("#betListChosenDate").exists()&&(g==LINES.enums.betListDuration.ByDay||g==LINES.enums.betListDuration.ByWeek||g==LINES.enums.betListDuration.ByMonth)){c+="&date="+$("#betListChosenDate").val()}if(!h.find(".partialbox").exists()){var a=true;c+="&includeTemplate=true"}if(a){m=h}else{m=h.find(".content");h.find(".betListFilter").removeClass("selected");$("#betListFilter"+g).addClass("selected")}if(f==null||f==""){f=LINES.config.virtualDirectory+"Asia/BetList/GetFull/"+g+"?customerId="+LINES.state.customerId}LINES.utils.removeAllHashtags();LINES.utils.addParameterToHashTag("fullBetList",f);var j=new LINES.stopWatch2();j.startstop();$.ajax({type:"POST",url:f,data:c,dataType:"text"}).done(function(n){j.startstop();LINES.utils.logNetworkCall(j.Getms(),f,false);h.removeClass("partialOuterBorder");LINES.utils.hideLoadingDiv();m.html(n);$("#betListFilter").val(g);h.find(".betListFilter").removeClass("selected");$("#betListFilter"+g).addClass("selected");h.find(".refresh").attr("href",f);if(d){$(".buttonsContainer").removeClass("hidden")}}).fail(function(o,p,n){j.startstop();LINES.utils.logNetworkCall(j.Getms(),f,true);h.removeClass("partialOuterBorder");LINES.utils.hideLoadingDiv();m.html($("#errorMessageSlim").html());if(n==undefined){n=""}LINES.logError(o.status+" "+p+" "+o.statusText+" "+n+" "+this.url,true,o.status)})},clickFromStatement:function(b,a){LINES.helpers.fullBetList.open(b,a)},filter:function(l,a,h){var m=$(l);var k=$("#FullBetList");var j=$(l).attr("id").substr(13);var b=$(l).attr("href");k.find(".refresh").attr("href",b);k.find("#betListFilter").val(j);if(j==LINES.enums.betListDuration.ByDay||j==LINES.enums.betListDuration.ByWeek||j==LINES.enums.betListDuration.ByMonth){var n=m.position();var c=n.left;var o=n.top;var f=$("#betListDatePickerDiv");var g=$("#betListDatePickerForm");var d=$("#betListChosenDate");if(d.hasClass("hasDatepicker")){d.datepicker("destroy")}g.attr("action",b);f.css({top:o,left:c});if(d.val()==""){var q=new Date();var p=LINES.helpers.fullBetList.formatDate(q.getFullYear(),(q.getMonth()+1),q.getDate());d.val(p)}f.removeClass("hidden");d.datepicker({dateFormat:"yy-m-d",showOtherMonths:true,selectOtherMonths:true,onSelect:function(t,s){LINES.helpers.fullBetList.selectDate(t,j)}});d.focus();f.addClass("hidden");var r=$("#ui-datepicker-div");r.removeClass("ui-weekpicker").removeClass("ui-monthpicker");if(j==LINES.enums.betListDuration.ByWeek){r.addClass("ui-weekpicker")}else{if(j==LINES.enums.betListDuration.ByMonth){r.addClass("ui-monthpicker")}}return}if(h==null||h==""){h=LINES.config.virtualDirectory+"Asia/BetList/GetFull/"+j+"?customerId="+LINES.state.customerId}LINES.helpers.fullBetList.refresh(h)},selectMonth:function(){var d=$("#ui-datepicker-div .ui-datepicker-month");var b=$("#ui-datepicker-div .ui-datepicker-year");var a="";if(LINES.state.culture!="en-US"){a=LINES.state.culture}var c=LINES.helpers.fullBetList.formatDate(b.text(),$.inArray(d.text(),$.datepicker.regional[a].monthNames)+1,1);$("#betListChosenDate").datepicker("hide");LINES.helpers.fullBetList.selectDate(c,LINES.enums.betListDuration.ByMonth)},selectDate:function(d,a){var b=$("#betListChosenDate");b.val(d);var c=LINES.config.virtualDirectory+"Asia/BetList/GetFull/"+a+"/"+d+"?customerId="+LINES.state.customerId;LINES.helpers.fullBetList.refresh(c)},buildHashUrl:function(){var a=LINES.utils.getParameterByName("fullBetList",window.location.hash);LINES.helpers.fullBetList.refresh(a)},closeHtml:function(){LINES.utils.dropParameterFromHashTag("fullBetList");var a=$("#FullBetList");a.addClass("hidden");a.find("content").html('<div class="noresults"></div>');a.find(".buttonsContainer").addClass("hidden");LINES.utils.hideLoadingDiv()},close:function(){var a=$("#FullBetList").find(".close").attr("href");LINES.helpers.fullBetList.closeHtml();LINES.utils.showLines();$.ajax({type:"POST",url:a,data:"test=test",success:function(){},dataType:"text"})},formatDate:function(b,c,a){return b+"-"+c+"-"+a}};LINES.helpers.headerlinks={refreshTimeout:120,enhancedInit:function(){LINES.helpers.headerlinks.setMessagesCount();$("#linkMessages").on("click",function(){return betterpopup(this,"MessageReport","width=735,height=580,scrollbars=yes")});$("#personalMessages a").on("click",function(){$("#personalMessagesCount").html("(0)");return betterpopup(this,"MessageReport","width=735,height=580,scrollbars=yes")});$("#linkMore").on("click",function(a){a.preventDefault();return false})},setMessagesCount:function(){var a=LINES.config.virtualDirectory+"TickerTape/GetPersonalMessagesCount";$.ajax({type:"POST",data:"test=test",dataType:"json",url:a,success:function(b){$("#personalMessagesCount").html("("+b+")");setTimeout(LINES.helpers.headerlinks.setMessagesCount,LINES.helpers.headerlinks.refreshTimeout*1000)}})}};LINES.enums={oddsFormat:{American:"0",Decimal:"1",HongKong:"2",Indonesian:"3",Malay:"4"},oddsFormatName:{"0":"American","1":"Decimal","2":"HongKong","3":"Indonesian","4":"Malay"},lineType:{Spread:"0",Moneyline:"1",Total:"2",Team1Total:"3",Team2Total:"4",TwSpread:"5",TwTotal:"6"},lineTypeName:{"0":"Spread","1":"Moneyline","2":"Total","3":"Team1Total","4":"Team2Total","5":"TwSpread","6":"TwTotal"},marketType:{Live:"Live",Today:"Today",Early:"Early"},marketTypeName:{"0":"Live","1":"Today","2":"Early"},soccerGamePeriod:{EndOfExtraTime:"EndOfExtraTime",EndOfGame:"EndOfGame",EndOfRegulation:"EndOfRegulation",ExtraTimeFirstHalf:"ExtraTimeFirstHalf",ExtraTimeHalfTime:"ExtraTimeHalfTime",ExtraTimeSecondHalf:"ExtraTimeSecondHalf",FirstHalf:"FirstHalf",HalfTime:"HalfTime",Penalties:"Penalties",PendingStart:"PendingStart",SecondHalf:"SecondHalf",Suspended:"Suspended"},bettingEventStatus:{Open:"0",Offline:"1",Cancelled:"2",Graded:"3",Circled:"4"},sportType:{Regular:"0",Baseball:"1",Soccer:"2"},sportTypeName:{"0":"Regular","1":"Baseball","2":"Soccer"},browserMode:{Basic:"0",Enhanced:"1"},browserType:{Desktop:"0",Mobile:"1"},tab:{Menu:"Menu",Ticket:"Ticket",Wager:"Wager",Pending:"Pending"},betListDuration:{Running:"0",Past7Days:"1",Past4Weeks:"2",ByDay:"3",ByWeek:"4",ByMonth:"5",Last10Ungraded:"6",LivePendingClearance:"7"},ticketNotificationType:{None:0,AboveAllowedMatchMaximum:1,AboveMaximumWagerAmount:2,Accepted:3,BelowMinimumWagerAmount:4,GameOffline:5,InsufficientFunds:6,PriceChanged:7,LockoutTimeViolation:8,WagerRelatedDataMissing:9,Pending:10,PercentChanged:11,PriceAndPercentChanged:12},ticketRiskOrWin:{Risk:"0",Win:"1"},lineViewType:{Simple:0,Double:1,Classic:2,Single:3},cssViewType:{Simple:0,Single:1,Double:2,Moneyline:3,Taiwan:4,TeamTotal:5},cssViewTypeName:{"0":"Simple","1":"Single","2":"Double","3":"Moneyline","4":"Taiwan","5":"TeamTotal"},changeStatus:{NoChange:0,Update:1,Offline:2},lineChangeDirection:{Highlight:2,Better:1,NoChange:0,Worse:-1},sortBy:{DateTime:0,TeamId:1,RotationNumber:420},side:{Home:0,Away:1,Draw:2},homeAway:{Home:"Home",Away:"Away"},alternateRow:{Even:"Even",Odd:"Odd"},altWagerTypeGroupId:{TEAMTOTALS:"1",MONEYLINE:"2"}};LINES.config.timerLimitCustomerBalanceClose=15;LINES.config.timerLimitTicketRefresh=11;LINES.config.timerLimitPendingRefresh=6;LINES.config.timerLimitLiveTicketRefresh=6;LINES.config.timerLimitBetMenuRefresh=60;LINES.features={OldBrowsersFullRefresh:false},LINES.state={template:{},refreshButtonList:{Live:{},Today:{},Early:{}},timerCountDownCustomerBalance:LINES.config.timerLimitCustomerBalance,timerCountDownCustomerBalanceClose:LINES.config.timerLimitCustomerBalanceClose,timerCountDownTicketRefresh:LINES.config.timerLimitTicketRefresh,timerCountDownPendingRefresh:LINES.config.timerLimitPendingRefresh,timerCountDownBetMenuRefresh:LINES.config.timerLimitBetMenuRefresh,countNetworkCalls:0,betTicketTimerEnabled:false,betTicketIsRefreshing:false,pendingListTimerEnabled:false,pendingListHasWagers:false,updateLeagueQueue:[],addEventQueue:[],unchangedGamesQueue:[],expandedSportId:null,timeStamps:{},custid:null,debugLog:"",logoutStarted:false};LINES.state.cleanQueues=function(){LINES.state.updateLeagueQueue.length=0;LINES.state.addEventQueue.length=0;LINES.state.unchangedGamesQueue.length=0};LINES.state.IdList=function(){var b=this;this.uniqueIds={};var a=function(c,f){c=Array.prototype.slice.call(c);for(var d=0;d<c.length;d++){var j=c[d];if(Object.prototype.toString.call(j)==="[object Array]"){for(var g=0;g<j.length;g++){var h=j[g];if(h!=null){f(h)}}}else{if(j!=null){f(j)}}}};this.hasId=function(c){return b.uniqueIds[c]!==undefined};this.add=function(){a(arguments,function(c){b.uniqueIds[c]=true})};this.remove=function(){a(arguments,function(c){delete b.uniqueIds[c]})};this.clear=function(){b.uniqueIds={}};this.clone=function(){var c=new LINES.state.IdList();for(var d in b.uniqueIds){c.uniqueIds[d]=b.uniqueIds[d]}return c};return this};LINES.state.IdCache=function(a){var f=this;var d=function(g){if(a){LINES.utils.log(a,g)}};for(var b in LINES.enums.marketType){this[b]=new LINES.state.IdList()}this.hasMarket=function(g){return f[g]!==undefined};var c=function(h,j){h=Array.prototype.slice.call(h);var g=h.shift();if(g===undefined||h.length===0||!f.hasMarket(g)){return}j(g,h)};this.hasId=function(g,h){if(!f.hasMarket(g)){return false}return f[g].hasId(h)};this.add=function(){c(arguments,function(g,h){d("["+g+"] add  "+h.join(","));f[g].add(h)})};this.remove=function(){c(arguments,function(g,h){d("["+g+"] remove  "+h.join(","));f[g].remove(h)})};this.clear=function(g){d("["+g+"] clear");if(!f.hasMarket(g)){return}f[g]=new LINES.state.IdList()};this.clone=function(){var g=new LINES.state.IdCache(a+".clone");for(var h in LINES.enums.marketType){g[h]=f[h].clone()}return g};this.toJson=function(){var h={};for(var k in LINES.enums.marketType){h[k]=[];if(f[k].uniqueIds){for(var g in f[k].uniqueIds){h[k].push(g)}}}return h};return this};LINES.dto={PriceLine:function(a,b,d,c){this.line=a;this.price=b;this.lineType=d;this.direction=(c==undefined)?LINES.enums.lineChangeDirection.NoChange:c}};LINES.logError=function(f,h,g){if(g===undefined&&f!=undefined&&f.status!=undefined){g=f.status}var k=(f!=undefined&&f.stack!=undefined)?f.stack:"";var j=(f!=undefined&&f.ignoreError===true)?true:false;var a=f+" "+$.toJSON(f)+" "+k;if(LINES.config.isDebugMode){console.log(a);alert(a+"\n"+arguments.callee.caller.name+"\n"+arguments.callee.caller.toString())}else{if(!((g>=12001&&g<=12185)||j===true||g===0||g===400||g===502||g===503||g===504||g===500||g===405||g===418||g===404||LINES.utils==undefined||(f!=undefined&&f.name=="NS_ERROR_NOT_AVAILABLE"))||LINES.config.verboseLoggingEnabled){var c={browserMode:LINES.state.browserMode,culture:LINES.state.culture,currency:LINES.state.currency,customerType:LINES.state.customerType,oddsFormat:LINES.state.oddsFormat,selectedEventFilterId:LINES.state.selectedEventFilterId,selectedLineViewType:LINES.state.selectedLineViewType,selectedPeriodNumber:LINES.state.selectedPeriodNumber,selectedSportId:LINES.state.selectedSportId,selectedTime:LINES.state.selectedTime,siteAccessType:LINES.state.siteAccessType,timeZoneId:LINES.state.timeZoneId};var d=$.toJSON(c);var b="error=[SB "+LINES.config.version+"] "+window.location.hostname+" "+escape(a)+"---UNICODE---"+LINES.utils.toUnicodeSequence(a)+"---STATE---"+escape(d);$.ajax({type:"POST",url:LINES.config.virtualDirectory+"App/LogError/",data:b,dataType:"text"})}if(g==419){LINES.reloadPage("logError");return}else{if(g==500||g==503){if(!h){LINES.reloadPage("logError")}return}}}};try{LINES.state.nochangeStore=new LINES.state.IdCache("lines.state.nochangeStore");LINES.state.uniqueLeagueIdStore=new LINES.state.IdCache("lines.state.uniqueLeagueIdStore")}catch(e){LINES.logError(e,true)}LINES.reloadPage=function(a){if(LINES.state.logoutStarted){return}if(LINES.config.isDebugMode){window.location.reload()}else{window.location.reload()}};LINES.helpers.layout={enhancedInit:function(){LINES.helpers.layout.setLeftColumnHeight();$(window).bind("resize",function(){LINES.helpers.layout.setLeftColumnHeight()});$("#linkRules").on("click",null,function(){return betterpopup(this,"Rules","width=980,height=600,scrollbars=yes")});$("#userPrefs").on("change",null,null,function(){LINES.userPrefs.submit()});var a=$("#culture").val();if((a!=LINES.state.culture)){LINES.userPrefs.submit()}LINES.state.custid=LINES.utils.getCookie("custid");var b=LINES.utils.getParameterByName("id",LINES.state.custid);if(b){$("#customerName").html(b.toUpperCase())}$("#logoutButtonLink").on("click",null,function(){LINES.state.logoutStarted=true;return true});$(window).focus(function(){if(LINES.utils.getCookie("custid")!=null&&LINES.utils.getCookie("custid")!=LINES.state.custid){LINES.state.custid=LINES.utils.getCookie("custid");alert("You have logged in with a second account in the same browser. This is not supported.");window.location.reload()}})},setLeftColumnHeight:function(){var c=$(window).height();var a=$("#divHeader").height();var b=$("#TickerTape").height();$("#menu_and_ticket").css({height:(c-a-b-5)+"px"})}};LINES.helpers.League=function(b,c){this.oddsFormat=LINES.state.oddsFormat;this.uniqueLeagueId=b;var a=LINES.helpers.League.getUniqueLeagueIdPieces(b);this.sportId=a.sportId;this.marketType=a.marketType;this.leagueId=a.leagueId;this.sportName=LINES.helpers.Sport.getSportName(this.sportId).toUpperCase();this.leagueJson=c};LINES.helpers.League.onError=function(a){LINES.utils.error("lines.league",a)};LINES.helpers.League.prototype.exists=function(){return LINES.helpers.League.doesLeagueExist(this.uniqueLeagueId)};LINES.helpers.League.prototype.create=function(d,a,h,c,k,g){var b=LINES.helpers.League.getTemplate();b.attr("id",this.uniqueLeagueId);b.removeClass("baseball regular soccer").addClass(LINES.enums.sportTypeName[k].toLowerCase());if(c==undefined){c=""}b.find(".order").html(c);b.find(".LeagueName").html(d);if(h!=null){a+=" - "+h}b.find(".dispName").html(a);var l=JSLINQ(this.leagueJson.BuySellLevels).Where(function(m){return m.IsSelected==true}).FirstOrDefault({Id:"0"});var f=l.Id;b.find('.buySellLevels option[value="'+f+'"]').attr("selected","selected");b.children(".RefreshCountDown").removeClass("Early Today Live").addClass(this.marketType);var j=9;if(g==LINES.enums.cssViewType.Single){j=15}else{if(g==LINES.enums.cssViewType.Taiwan){j=7}}b.find(".ColumnCount").attr("colspan",j);return b};LINES.helpers.League.prototype.updateLeagueFast=function(h,b,g,d){var f=this;var c=$.Deferred();var a=LINES.utils.tryExec(c,function(){if(!g){LINES.helpers.League.updateLeagueHeader(f.uniqueLeagueId,h.DisplayName,h.PeriodDesc,h.BuySellLevels,d)}for(var j in h.UnchangedGames){LINES.state.unchangedGamesQueue.push({marketType:f.marketType,eventId:h.UnchangedGames[j],cssViewType:d})}},"LINES.helpers.League.updateLeagueHeader");if(!a){return c.promise()}LINES.utils.delayedForEach(LINES.state.unchangedGamesQueue,{action:function(j,k){LINES.helpers.Event.updateEventNoChange(k.marketType,k.eventId,d)},delay:10}).fail(function(j){LINES.helpers.League.onError(j);c.reject(j)}).done(function(){var j=LINES.utils.tryExec(c,function(){for(var o in h.GameLines){var y=h.GameLines[o];var p=LINES.helpers.Event.getUniqueEventId(f.marketType,y.EvId,y.Lvl);var l;var t=LINES.utils.tryExec(c,function(){l=new LINES.helpers.Event(f.sportId,f.leagueId,p,b,f.sportName,g,d)},"createEventSuccess");if(t){var r=l.updateRow(y);var s=r.domElements;if(b){LINES.state.addEventQueue.push({uniqueLeagueId:f.uniqueLeagueId,domElements:s,isNewLeague:b})}else{if(!l.exists()){LINES.state.addEventQueue.push({uniqueLeagueId:f.uniqueLeagueId,domElements:s,isNewLeague:b,uniqueEventId:p,eventHelper:l})}}var v=f.marketType+"_"+y.EvId;LINES.state.nochangeStore.remove(f.marketType,v)}}var u=[];var n=[];var q=[];var k=function(A){if(h.GameLines==null){return false}var B=false;$.each(h.GameLines,function(C,D){if(D==null){return true}else{B=D.EvId==A.eventId;B=B&&D.Lvl==A.buySellLevel;return !B}});if(LINES.utils.canLog("lines.league")&&B){u.push(A.eventId+"_"+A.buySellLevel)}return B};var m=function(A){if(h.UnchangedGames==null){return false}var B=false;$.each(h.UnchangedGames,function(C,D){if(D==null){return true}else{B=D==A.eventId;return !B}});if(LINES.utils.canLog("lines.league")&&B){n.push(A.eventId+"_"+A.buySellLevel)}return B};if(!b){var z=LINES.helpers.League.getEventList(f.uniqueLeagueId);$.each(z,function(A,D){var C=$(D).attr("id");var B=LINES.helpers.Event.getUniqueEventIdPieces(C);if(!k(B)&&!m(B)){q.push(B.eventId+"_"+B.buySellLevel);LINES.helpers.League.removeEvent(C)}});var w=function(B,A){if(B.length==0){LINES.utils.log("lines.league",A)}else{LINES.utils.warn("lines.league",A)}};if(LINES.utils.canLog("lines.league")){w(u,f.uniqueLeagueId+" "+h.Name+" changed:  ("+u.length+")"+u.join(","));w(n,f.uniqueLeagueId+" "+h.Name+" unchanged:("+n.length+")"+n.join(","));w(q,f.uniqueLeagueId+" "+h.Name+" removed:  ("+q.length+")"+q.join(",")+"\n")}}},"lineUpdateSuccess");if(j){LINES.utils.delayedForEach(LINES.state.addEventQueue,{action:function(k,m){var l=LINES.helpers.League;if(m.isNewLeague){l.addEventToTableEnd(m.uniqueLeagueId,m.domElements)}else{l.addEvent(m.uniqueEventId,m.domElements,m.eventHelper,m.uniqueLeagueId)}},chunkSize:5,chunkDelay:20}).fail(function(k){LINES.helpers.League.onError(k);c.reject(k)}).done(function(){c.resolve()})}});return c.promise()};LINES.helpers.League.addEvent=function(d,g,c,m){var h=false;var k=LINES.helpers.Event.getUniqueEventIdPieces(d);var f=$("."+k.marketType+"_"+k.eventId+"-Row");if(f.exists()){var a=null;$.each(f,function(p,r){a=$(r).attr("id");var q=LINES.helpers.Event.getUniqueEventIdPieces(a);if((k.buySellLevel*1)<(q.buySellLevel*1)){LINES.helpers.League.addEventToTable(a,g);h=true;return false}return true});if(h==false){LINES.helpers.League.addEventToBuySellEnd(a,g)}}else{var b=new Date(c.getStartTime());var j=c.getRotationNumber();var o=LINES.helpers.League.getEventList(m);k=LINES.helpers.League.getUniqueLeagueIdPieces(m);var n=k.sportId;var l=k.leagueId;b.setHours(0,0,0,0);$.each(o,function(p,u){var t=$(u).attr("id");var r=new LINES.helpers.Event(n,l,t,false,"");var q=new Date(r.getStartTime());var s=r.getRotationNumber();q.setHours(0,0,0,0);if(k.marketType==LINES.enums.marketType.Early){if(b.getTime()<q.getTime()||(b.getTime()==q.getTime()&&j<s)){LINES.helpers.League.addEventToTable(t,g);h=true;return false}}else{if(j<s){LINES.helpers.League.addEventToTable(t,g);h=true;return false}}return true});if(!h){LINES.helpers.League.addEventToTableEnd(m,g)}}};LINES.helpers.League.enhancedInit=function(){var a=$("#lines_area");a.on("click",".MarketContainer.Live .league_header .Refresh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Live);return false});a.on("click",".MarketContainer.Today .league_header .Refresh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Today);return false});a.on("click",".MarketContainer.Early .league_header .Refresh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Early);return false})};LINES.helpers.League.getTemplate=function(){var a;if(LINES.state.template.league!=undefined){a=LINES.state.template.league}else{a=$("#templateDiv").find(".sportContainer .MarketContainer .LeagueContainer").eq(0).clone();a.find("tr.evRow").remove();a.find(".buySellLevels option").removeAttr("selected");LINES.state.template.league=a}return a.clone()};LINES.helpers.League.removeEvent=function(a){LINES.helpers.EventHtml.removeEvent(a)};LINES.helpers.League.getUniqueLeagueId=function(b,a,c){var d;if(a==undefined||String(a)=="undefined"){throw"League.getUniqueLeagueId  sportId is undefined."}if(c==undefined||String(c)=="undefined"){throw"League.getUniqueLeagueId  leagueId is undefined."}if(b==undefined||String(b)=="undefined"){throw"League.getUniqueLeagueId  marketType is undefined."}d=b+"_"+a+"_"+c;return d};LINES.helpers.League.getUniqueLeagueIdPieces=function(f){var d=f.split("_");var b=d[0];var a=d[1];var c=d[2];if(b==undefined){throw"League.getUniqueLeagueIdPieces: marketType is undefined: uniqueLeagueId: "+f}if(a==undefined){throw"League.getUniqueLeagueIdPieces: sportId is undefined: uniqueLeagueId: "+f}if(c==undefined){throw"League.getUniqueLeagueIdPieces: leagueId is undefined: uniqueLeagueId: "+f}return{marketType:b,sportId:a,leagueId:c}};LINES.helpers.League.doesLeagueExist=function(a){return $("#"+a).exists()};LINES.helpers.League.closeLeague=function(b){var a=LINES.helpers.League.getUniqueLeagueIdPieces(b);if(a!=null&&a.marketType!=undefined){LINES.state.uniqueLeagueIdStore.remove(a.marketType,b)}LINES.helpers.League.close(b);LINES.helpers.Market.clean(b);LINES.utils.warn("lines.league","Closing league: "+b)};LINES.helpers.League.closeLeagues=function(){var a=$.Deferred();var b=$.makeArray(arguments);b.shift();var c=LINES.utils.flattenArray(b,true);a.resolve();$.each(c,function(d,f){LINES.helpers.League.closeLeague(f)});return a.promise()};LINES.helpers.League.close=function(b){var a=LINES.helpers.League.getUniqueEventIdList(b);$.each(a,function(c,f){var d=LINES.helpers.Event.getUniqueEventIdPieces(f);LINES.state.nochangeStore.remove(d.marketType,d.marketType+"_"+d.eventId)});$("#"+b).remove()};LINES.helpers.League.addEventToTableEnd=function(b,a){$("#"+b).append(a.rows[0].domElement)};LINES.helpers.League.addEventToTable=function(a,b){$("#"+a).before(b.rows[0].domElement)};LINES.helpers.League.getUniqueEventIdList=function(b){var a=[];var c=LINES.helpers.League.getEventList(b);var d=$(c[0]);if(d.exists()){$.each(c,function(f,h){var g=$(h).attr("id");a.push(g)})}return a};LINES.helpers.League.getEventList=function(a){return $("#"+a).find("tr:gt(0)").get()};LINES.helpers.League.addEventToBuySellEnd=function(a,b){$("#"+a).after(b.rows[0].domElement)};LINES.helpers.League.updateLeagueHeader=function(g,j,c,h,d){if(c!=null){j+=" - "+c}var b=$("#"+g);b.find(".dispName").html(j);if(d==LINES.enums.cssViewType.Moneyline||d==LINES.enums.cssViewType.TeamTotal){b.find(".buySellLevels").addClass("hidden")}else{var f=JSLINQ(h).Where(function(k){return k.IsSelected==true}).FirstOrDefault({Id:"0"});var a=f.Id;b.find(".buySellLevels option").removeAttr("selected");b.find('.buySellLevels option[value="'+a+'"]').attr("selected","selected")}};LINES.helpers.League.processLeagueQueue=function(){var d=$.makeArray(arguments);if(d.length==0){return LINES.utils.toEmptyPromise()}var a=d.shift();var c=d.shift();c=c===undefined?$.Deferred():c;var f=LINES.state.updateLeagueQueue.shift();if(f==undefined){c.resolve()}else{var b=new LINES.helpers.League(f.uniqueLeagueId,f.leagueJson);b.updateLeagueFast(f.leagueJson,f.isNewLeague,f.isUpdate,f.cssViewType).done(function(){var g=0;if(LINES.utils.isIE7()){g=400}LINES.utils.delay(function(){LINES.helpers.League.processLeagueQueue(a,c).fail(function(h){LINES.helpers.League.onError(h);c.reject(h)})},g)}).fail(function(g){LINES.helpers.League.onError(g);c.reject(g)})}return c.promise()};LINES.helpers.Market=function(b,a,d,c){this.marketType=b;this.sportId=a;this.sportName=d;this.cssViewType=c;this.uniqueMarketId=LINES.helpers.Market.getUniqueMarketId(this.marketType,this.sportId);this.domElement=$("#"+this.uniqueMarketId)};LINES.helpers.Market.onError=function(a){LINES.utils.error("lines.market",a);LINES.logError(a)};LINES.helpers.Market.prototype.exists=function(){return this.domElement.exists()};LINES.helpers.Market.prototype.create=function(c,a){var b=this.createElement(c);this.domElement=b;this.updateHeaderLabels(a);LINES.helpers.Sport.addMarket(this.sportId,this.marketType,b);this.domElement=$("#"+this.uniqueMarketId)};LINES.helpers.Market.prototype.createElement=function(d){var c=LINES.helpers.Market.getTemplate(this.cssViewType);c.attr("id",this.uniqueMarketId);var b=LINES.helpers.Market.getUniqueMarketIdPieces(this.uniqueMarketId);var a=b.marketType;c.addClass(a);c.find(".MarketName").html((d==null)?"":d.toString().toUpperCase());c.find(".RefreshCountDown").addClass(a);return c};LINES.helpers.Market.prototype.addLeague=function(k,a,l){var j=new LINES.helpers.League(k,a);var f=j.create(a.Name,a.DisplayName,a.PeriodDesc,a.SortOrder,a.SportType,this.cssViewType);if($("#"+this.uniqueMarketId).find(".noEvents").exists()){$("#"+this.uniqueMarketId).find(".noEvents").remove()}var c=a.SortOrder;var d=$(f).find(".LeagueName").html();var h=LINES.helpers.Market.getLeagueList(this.uniqueMarketId);var g=false;var b=false;$.each(h,function(o,q){b=true;var m=$(q);var s=m.attr("id");if(s==""){return true}var p=m.find(".order").html();var r=m.find(".LeagueName").html();var n=LINES.helpers.League.getUniqueLeagueIdPieces(s);if((c!=null&&p!=""&&(c<p))||(c!=null&&p=="")||(c==null&&p==""&&(d<r))){$("#"+s).before(f);g=true;return false}return true});if(!g){$("#"+this.uniqueMarketId).find("table").append(f)}f=null;LINES.state.updateLeagueQueue.push({uniqueLeagueId:k,leagueJson:a,isNewLeague:true,cssViewType:this.cssViewType,isUpdate:l})};LINES.helpers.Market.prototype.addNoEvents=function(){LINES.helpers.Market.addNoEventsMessage(this.uniqueMarketId);return this};LINES.helpers.Market.prototype.updateHeaderLabels=function(a){var c=this.domElement.find("table");var d=LINES.helpers.Market.getTemplate(this.cssViewType);c.find(".header").replaceWith(d.find(".header"));if(a!=undefined){for(var b=0;b<=a.length;b++){if(a[b]!=null){a[b]=a[b].toString().toUpperCase()}this.domElement.find(".Label"+b).html(a[b])}}this.changeTableLayout();return this};LINES.helpers.Market.prototype.changeTableLayout=function(){var a=LINES.enums.cssViewTypeName[this.cssViewType];var b=this.getShowingViewType();if(this.cssViewType==LINES.enums.cssViewType.TeamTotal){a=LINES.enums.cssViewTypeName[LINES.enums.cssViewType.Simple]}if(a!=b){this.domElement.find(".lineView").removeClass(b).addClass(a);this.closeLeagues()}};LINES.helpers.Market.prototype.getShowingViewType=function(){var a=this.domElement.find(".lineView");if(a.hasClass("Simple")){return"Simple"}if(a.hasClass("Single")){return"Single"}if(a.hasClass("Moneyline")){return"Moneyline"}if(a.hasClass("Double")){return"Double"}if(a.hasClass("Taiwan")){return"Taiwan"}};LINES.helpers.Market.prototype.closeLeagues=function(){var a=LINES.helpers.Market.getUniqueLeagueIdList(this.uniqueMarketId);return LINES.helpers.League.closeLeagues(null,a)};LINES.helpers.Market.prototype.setHideMarket=function(f,g){if(g){var j=LINES.helpers.Market.getUniqueMarketId(LINES.enums.marketType.Live,this.sportId);var a=LINES.helpers.Market.getUniqueMarketId(LINES.enums.marketType.Today,this.sportId);var c=LINES.helpers.Market.getUniqueMarketId(LINES.enums.marketType.Early,this.sportId);var h=LINES.helpers.Market.doesMarketExist(j);var b=LINES.helpers.Market.doesMarketExist(a);var d=LINES.helpers.Market.doesMarketExist(c);if(h&&b&&d){if(!LINES.helpers.Market.hasEvents(j)&&!LINES.helpers.Market.hasEvents(a)&&!LINES.helpers.Market.hasEvents(c)){$("#"+j).addClass("hidden");$("#"+c).addClass("hidden");$("#"+a).removeClass("hidden")}else{if(!LINES.helpers.Market.hasEvents(j)){$("#"+j).addClass("hidden")}else{$("#"+j).removeClass("hidden")}if(!LINES.helpers.Market.hasEvents(a)){$("#"+a).addClass("hidden")}else{$("#"+a).removeClass("hidden")}if(!LINES.helpers.Market.hasEvents(c)){$("#"+c).addClass("hidden")}else{$("#"+c).removeClass("hidden")}}}else{if(h&&b){if(!LINES.helpers.Market.hasEvents(j)&&!LINES.helpers.Market.hasEvents(a)){$("#"+j).addClass("hidden");$("#"+a).removeClass("hidden")}else{if(LINES.helpers.Market.hasEvents(j)&&!LINES.helpers.Market.hasEvents(a)){$("#"+j).removeClass("hidden");$("#"+a).addClass("hidden")}else{if(!LINES.helpers.Market.hasEvents(j)&&LINES.helpers.Market.hasEvents(a)){$("#"+j).addClass("hidden");$("#"+a).removeClass("hidden")}else{$("#"+j).removeClass("hidden");$("#"+a).removeClass("hidden")}}}}}}else{if(f==true){this.domElement.addClass("hidden")}else{this.domElement.removeClass("hidden")}}return this};LINES.helpers.Market.enhancedInit=function(){var a=$("#lines_area");a.on("click",".MarketContainer.Live .rfsh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Live);return false});a.on("click",".MarketContainer.Today .rfsh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Today);return false});a.on("click",".MarketContainer.Early .rfsh",function(){LINES.helpers.Market.refreshMarket(LINES.enums.marketType.Early);return false})};LINES.helpers.Market.RefreshButton=function(a){var c=LINES.state.refreshButtonList;var d=LINES.state.translationsStore;this.marketType=a;this.button=null;if(c[this.marketType]===undefined||$.isEmptyObject(c[this.marketType])){c[this.marketType]=$("#lines_area").find(".market_header .rfsh ."+this.marketType)}this.button=c[this.marketType];if(!this.button||!this.button.exists()){this.button=null}var b=this;this.exists=function(){return b.button!=null};this.isSuspended=function(){return b.exists()&&b.button.attr("data-state")==="Waiting"};this.suspend=function(f){var g=null;if(b.exists()){b.button.attr("data-state","Waiting");b.button.html(d["Please Wait"]);if($.isNumeric(f)&&f>0){g=setTimeout(function(){if(b.isSuspended()){LINES.utils.log("lines.market",b.marketType+": activating timeout to restart countdown timer.");b.activate()}g=null},f)}}return g};this.updateText=function(f){if(b.exists()){b.button.attr("data-state","Done");b.button.html(d.refresh+"&nbsp;"+f)}};this.activate=function(){var f=new LINES.helpers.Market.RefreshTimer(b.marketType);f.reset();if(b.button!=null){b.button.attr("data-state","Done");b.updateText(f.count())}};return this};LINES.helpers.Market.RefreshTimer=function(a){this.marketType=a;var b=this;var d=LINES.config.timerLimitMarketRefresh[this.marketType];var c=LINES.state.timerCountDownMarketRefresh;var f=LINES.helpers.Market;this.count=function(g){if($.isNumeric(g)){c[b.marketType]=g}return c[b.marketType]};this.reset=function(){b.count(d)};this.tickDown=function(){var h=b.count();var g=new f.RefreshButton(b.marketType);if(h<=1){b.reset();if(g.exists()){f.refreshMarket(b.marketType)}}else{b.count(h-1);if(!g.isSuspended()){g.updateText(b.count())}}};return this};LINES.helpers.Market.countDown=function(){for(var a in LINES.enums.marketType){new LINES.helpers.Market.RefreshTimer(a).tickDown()}};LINES.helpers.Market.refreshMarket=function(a){var c=$.Deferred();var b=(LINES.state.timeStamps[a]==undefined)?null:LINES.state.timeStamps[a];LINES.utils.log("lines.market",a+" refresh [START] TimeStamp:"+b);var d=new LINES.helpers.Market.RefreshButton(a);try{var g=null;c.always(function(){d.activate();if(g!=null){LINES.utils.log("lines.market",a+" cancel reset Handle:"+g);clearTimeout(g)}});if(d.isSuspended()){c.resolve();return c.promise()}g=d.suspend(15000);var f=function(){LINES.ajax.getUpdates(a).done(function(j){if(j!=null){LINES.utils.log("lines.market",a+" refresh [END]   TimeStamp:"+j.TimeStamp);if(j.ErrorMessage!=null){LINES.utils.log("lines.market",j.TimeStamp+" "+j.ErrorMessage)}}else{LINES.utils.log("lines.market",a+" linesContainerJson is null")}LINES.helpers.Sport.processLinesContainer(j,a,false).done(function(){c.resolve()}).fail(function(k){LINES.helpers.Market.onError(k);c.reject(k)})}).fail(function(j){LINES.helpers.Market.onError(j);c.reject(j)})};f()}catch(h){LINES.helpers.Market.onError(h);c.reject(h)}return c.promise()};LINES.helpers.Market.clean=function(b){var a=LINES.helpers.Market.getUniqueMarketId(b);var c=LINES.helpers.Market.getLeagueList(a);if(c.length==0){LINES.helpers.Market.addNoEventsMessage(a)}};LINES.helpers.Market.getLeagueIdsByUniqueMarketId=function(a){var b=[];var c=LINES.helpers.Market.getLeagueList(a);$.each(c,function(d,f){b.push($(f).attr("id"))});return b};LINES.helpers.Market.close=function(){var a=LINES.utils.flattenArray(arguments,true);if(a.length==0){return LINES.utils.toEmptyPromise()}$.each(a,function(c,b){var d=LINES.helpers.Market.getUniqueMarketIdPieces(b);LINES.state.uniqueLeagueIdStore.clear(d.marketType);LINES.state.nochangeStore.clear(d.marketType);$("#"+b).remove()});return LINES.utils.toEmptyPromise()};LINES.helpers.Market.getUniqueMarketId=function(){var b=null;var a=null;if(arguments.length==1){var d=arguments[0];var c=LINES.helpers.League.getUniqueLeagueIdPieces(d);b=c.marketType;a=c.sportId}else{if(arguments.length==2){b=arguments[0];a=arguments[1]}}return b+"_"+a};LINES.helpers.Market.getUniqueMarketIdPieces=function(b){var d=b.split("_");var c=d[0];var a=d[1];return{marketType:c,sportId:a}};LINES.helpers.Market.doesMarketExist=function(a){return $("#"+a).exists()};LINES.helpers.Market.getUniqueLeagueIdList=function(b){var g=LINES.helpers.Market.getLeagueList(b);var d=LINES.helpers.Market.getUniqueMarketIdPieces(b);var a=d.sportId;var c=d.marketType;var f=[];$.each(g,function(h,l){var k=$(l).attr("id");var j=LINES.helpers.League.getUniqueLeagueIdPieces(k);if(j.marketType==c&&j.sportId==a){f.push(k)}});return f};LINES.helpers.Market.getTemplate=function(a){var b;if(a==LINES.enums.cssViewType.Moneyline){if(LINES.state.template.marketMoneyline!=undefined){b=LINES.state.template.marketMoneyline}else{b=$("#templateDiv").find(".sportContainer .MarketContainer").eq(0).clone();b.removeClass("Live Today Early");b.find(".LeagueContainer").remove();b.find(".RefreshCountDown").removeClass("Live Today Early");b.find(".header.Single").remove();b.find(".header.Simple").remove();b.find(".header.Double").remove();b.find(".header.Taiwan").remove();LINES.state.template.marketMoneyline=b}}else{if(a==LINES.enums.cssViewType.Single){if(LINES.state.template.marketSingle!=undefined){b=LINES.state.template.marketSingle}else{b=$("#templateDiv").find(".sportContainer .MarketContainer").eq(0).clone();b.removeClass("Live Today Early");b.find(".LeagueContainer").remove();b.find(".RefreshCountDown").removeClass("Live Today Early");b.find(".header.Simple").remove();b.find(".header.Moneyline").remove();b.find(".header.Double").remove();b.find(".header.Taiwan").remove();LINES.state.template.marketSingle=b}}else{if(a==LINES.enums.cssViewType.Double){if(LINES.state.template.marketDouble!=undefined){b=LINES.state.template.marketDouble}else{b=$("#templateDiv").find(".sportContainer .MarketContainer").eq(0).clone();b.removeClass("Live Today Early");b.find(".LeagueContainer").remove();b.find(".RefreshCountDown").removeClass("Live Today Early");b.find(".header.Simple").remove();b.find(".header.Moneyline").remove();b.find(".header.Single").remove();b.find(".header.Taiwan").remove();LINES.state.template.marketDouble=b}}else{if(a==LINES.enums.cssViewType.Taiwan){if(LINES.state.template.marketTaiwan!=undefined){b=LINES.state.template.marketTaiwan}else{b=$("#templateDiv").find(".sportContainer .MarketContainer").eq(0).clone();b.removeClass("Live Today Early");b.find(".LeagueContainer").remove();b.find(".RefreshCountDown").removeClass("Live Today Early");b.find(".header.Simple").remove();b.find(".header.Moneyline").remove();b.find(".header.Single").remove();b.find(".header.Double").remove();LINES.state.template.marketTaiwan=b}}else{if(LINES.state.template.marketSimple!=undefined){b=LINES.state.template.marketSimple}else{b=$("#templateDiv").find(".sportContainer .MarketContainer").eq(0).clone();b.removeClass("Live Today Early");b.find(".LeagueContainer").remove();b.find(".RefreshCountDown").removeClass("Live Today Early");b.find(".header.Moneyline").remove();b.find(".header.Single").remove();b.find(".header.Double").remove();b.find(".header.Taiwan").remove();LINES.state.template.marketSimple=b}}}}}return b.clone()};LINES.helpers.Market.getTemplateForNoEvents=function(){var a;if(LINES.state.template.noevents!=undefined){a=LINES.state.template.noevents}else{a=$("#templateDiv").find(".noEvents").clone();LINES.state.template.noevents=a}a=a.clone();return a};LINES.helpers.Market.addNoEventsMessage=function(a){var f=$("#"+a);var b=9;var d=f.find(".header");if(d.hasClass("Single")){b=15}else{if(d.hasClass("Taiwan")){b=7}}if(!f.find(".noEvents").exists()){var c=LINES.helpers.Market.getTemplateForNoEvents();c.find(".ColumnCount").attr("colspan",b);f.find("thead").after(c)}else{f.find(".ColumnCount").attr("colspan",b)}};LINES.helpers.Market.hasEvents=function(a){return !$("#"+a).find(".noEvents").exists()};LINES.helpers.Market.getLeagueList=function(a){return $("#"+a).find(".LeagueContainer").get()};LINES.helpers.miniBetList={enhancedInit:function(){$("#WagerContent").on("click","#acceptedWagerList .compactTicket",function(){return LINES.helpers.miniBetList.clickCompactTicket($(this))});$("#WagerContent").on("click",".retry",function(){LINES.helpers.miniBetList.loadBetList();return false});LINES.helpers.miniBetList.showNewResults();var a=LINES.utils.getParameterByName("wager",window.location.hash);if(a!=null){this.callBetListUrl(a)}},clickCompactTicket:function(a){try{var b=a.attr("id");var d=b.substring(13);LINES.helpers.miniBetList.showAcceptedTicket(d);return false}catch(c){LINES.logError(c);return true}},showNewResults:function(){$("#acceptedWagerList").find(".acceptedTicket").css("display","none");$("#acceptedWagerList").find("#acceptedTicket1").css("display","block");$("#acceptedWagerList").find("#compactTicket1").css("display","none");$("#acceptedWagerList").find(".compactTicket").removeClass("hidden");LINES.utils.hideLoadingDiv("acceptedWagerList")},getUrl:function(){return LINES.config.virtualDirectory+"BetList/GetMini/"+LINES.enums.betListDuration.Last10Ungraded+"?customerId="+LINES.state.customerId},loadBetList:function(){LINES.utils.showLoadingDiv($("#acceptedWagerList"),"medium","center",true);var a=this.getUrl();this.callBetListUrl(a)},callBetListUrl:function(b){var a=new LINES.stopWatch2();a.startstop();LINES.helpers.tabs.activateTabWithHash("wager",b);$.ajax({type:"POST",url:b,data:"test=test",dataType:"text",success:function(c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,false);$("#WagerContent").html(c);LINES.helpers.miniBetList.showNewResults()},error:function(d,f,c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,true);LINES.utils.hideLoadingDiv("acceptedWagerList");$("#WagerContent").find(".betListContainer").html($("#errorMessageSlim").html());if(c==undefined){c=""}LINES.logError(d.status+" "+f+" "+d.statusText+" "+c+" "+this.url,true,d.status)}})},hideAllWagers:function(){$("#acceptedWagerList").find(".acceptedTicket").slideUp();$("#acceptedWagerList").find(".compactTicket").slideDown()},showAcceptedTicket:function(b){LINES.helpers.miniBetList.hideAllWagers();var a="compactTicket"+b;var c="acceptedTicket"+b;$("#"+a).slideUp();$("#"+c).slideDown()}};LINES.onload=function(){$(window).on("beforeunload",function(){});$.ajaxSetup({error:function(b,c,a){LINES.utils.hideLoadingDiv();if(a==undefined){a=""}LINES.logError(b.status+" "+c+" "+b.statusText+" "+a+" "+this.url,false,b.status)}});$.ajax({type:"POST",url:LINES.config.virtualDirectory+"Asia/GetState",data:"test=test",success:function(b){var f=b.state;$.each(f,function(h,j){if(h.indexOf("intelli")==-1){LINES.state[h]=j}else{if(h.indexOf("intellitrackerJsUrl")==-1){INTELLITRACKER[h.replace("intelli","")]=j}}});if(b.hashes!=undefined){$.each(b.hashes,function(h,j){LINES.utils.addParameterToHashTag(h,j)})}for(var d in LINES.helpers){var c=LINES.helpers[d];if(c.enhancedInit!=undefined){c.enhancedInit()}}try{LINES.utils.logs.learn("lines.league","lines.market","lines.betticket","lines.sport","lines.state");if(LINES.config.isInspectletEnabled&&f.canLogCustomer){window.__insp=window.__insp||[];var a=LINES.config.inspectletTagId;__insp.push(["wid",a]);(function(){function h(){var k=document.createElement("script");k.type="text/javascript";k.async=true;k.id="inspsync";k.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(k,j)}if(window.attachEvent){window.attachEvent("onload",h)}else{window.addEventListener("load",h,false)}})()}if(!LINES.utils.isIE7()&&window.location.hostname=="members.pinnaclesports.com"){$LAB.script(f.intellitrackerJsUrl).script("https://tracker.pinnaclesports.com/e/clicks.js")}}catch(g){}},dataType:"json"});setTimeout(LINES.timers.mainCountDown,1000)};LINES.onunload=function(){};LINES.helpers.pendingBetList={enhancedInit:function(){$("#PendingContent").on("click","#pendingBetsRefresh",function(b){b.preventDefault();LINES.helpers.pendingBetList.refreshWagerList();return false});$("#PendingContent").on("click",".retry",function(){LINES.helpers.pendingBetList.refreshWagerList();return false});var a=LINES.utils.getParameterByName("ticket",window.location.hash);if(a!=null){this.callPendingBetUrl(a)}},loadBetList:function(){LINES.utils.showLoadingDiv($("#pendingBetList"),"medium","center",true);var a=LINES.config.virtualDirectory+"BetList/GetMini/"+LINES.enums.betListDuration.LivePendingClearance+"?customerId="+LINES.state.customerId;LINES.helpers.tabs.activateTabWithHash("ticket",a);this.callPendingBetUrl(a)},callPendingBetUrl:function(b){var a=new LINES.stopWatch2();a.startstop();$.ajax({type:"POST",url:b,data:"test=test",dataType:"text",success:function(c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,false);$("#PendingContent").html(c);LINES.utils.hideLoadingDiv("pendingBetList");var d=$("#pendingBetsRefresh");if(!d.length>0&&LINES.state.pendingListHasWagers){LINES.state.pendingListHasWagers=false;LINES.state.pendingListTimerEnabled=false;LINES.helpers.tabs.selectTab(LINES.enums.tab.Wager);LINES.helpers.miniBetList.loadBetList()}else{if(!d.length>0){LINES.state.pendingListHasWagers=false;LINES.state.pendingListTimerEnabled=false}else{LINES.state.timerCountDownPendingRefresh=LINES.config.timerLimitPendingRefresh;LINES.state.pendingListHasWagers=true;LINES.state.pendingListTimerEnabled=true}}},error:function(d,f,c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,true);LINES.utils.hideLoadingDiv("pendingBetList");$("#PendingContent").find(".betListContainer").html($("#errorMessageSlim").html());if(c==undefined){c=""}LINES.logError(d.status+" "+f+" "+d.statusText+" "+c+" "+this.url,true,d.status)}})},refreshWagerList:function(){var a=$("#pendingBetsRefresh");LINES.state.pendingListTimerEnabled=false;a.find("span").html(LINES.state.translationsStore["Please Wait"]);LINES.helpers.pendingBetList.loadBetList();LINES.state.timerCountDownPendingRefresh=LINES.config.timerLimitPendingRefresh},countDown:function(){var a=$("#pendingBetsRefresh");if(a.length>0&&LINES.state.pendingListTimerEnabled){LINES.state.timerCountDownPendingRefresh--;if(LINES.state.timerCountDownPendingRefresh==0){LINES.helpers.pendingBetList.refreshWagerList()}else{if(LINES.state.timerCountDownPendingRefresh>0){a.find("span").html(LINES.state.translationsStore.refresh+"&nbsp;"+LINES.state.timerCountDownPendingRefresh)}}}}};LINES.helpers.results={enhancedInit:function(){$("#linkNormalGamesResults").click(function(){LINES.helpers.results.open();return false});var a=$("#Results");a.on("click",".close",function(){LINES.helpers.results.close();return false});a.on("click",".resultsFilter",function(){LINES.helpers.results.filter(this);return false});a.on("change","#resultsFilterSport",function(){LINES.helpers.results.applyFilter();return false});a.on("change","#resultsFilterLeague",function(){LINES.helpers.results.applyFilter();return false});a.on("change","#resultsFilterSort",function(){LINES.helpers.results.applyFilter();return false});a.on("change","#resultsFilterDate",function(){LINES.helpers.results.applyDateFilter();return false});a.on("click","#resultsFilterTodayDate",function(){LINES.helpers.results.applyTodayDate();return false});a.on("click","#resultsFilterYesterdayDate",function(){LINES.helpers.results.applyYesterdayDate();return false});LINES.helpers.results.initDatePicker();var b=LINES.utils.getParameterByName("results",window.location.hash);if(b){LINES.helpers.results.open(b)}},isOpen:function(){return !($("#Results").hasClass("hidden"))},open:function(a){LINES.utils.popups.closeAllExcept("results");LINES.utils.hideLines();$("#Results").removeClass("hidden");LINES.helpers.results.load(a)},load:function(b){var a=$("#Results");LINES.utils.showLoadingDiv(a.find(".content"),"medium");if(b==null){b=LINES.config.virtualDirectory+"Asia/"+LINES.state.culture+"/Results/NormalGames/"}LINES.utils.removeAllHashtags();LINES.helpers.results.ajaxUpdate(b)},update:function(){var a=$("#Results");LINES.utils.showLoadingDiv(a.find(".content"),"medium");var b=LINES.config.virtualDirectory+"Asia/"+LINES.state.culture+"/Results/NormalGames/"+this.selectedSorting+"/"+this.selectedSportId+"/"+this.selectedLeagueId+"/"+this.selectedDate;LINES.helpers.results.ajaxUpdate(b)},ajaxUpdate:function(b){LINES.helpers.results.updateHashTag(b);var a=new LINES.stopWatch2();a.startstop();$.ajax({type:"GET",url:b,success:function(c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,false);LINES.utils.hideLoadingDiv();$("#Results").html(c);LINES.helpers.results.initDatePicker()},dataType:"text"})},updateHashTag:function(a){LINES.utils.addParameterToHashTag("results",a)},initDatePicker:function(){var a=$("#resultsFilterDate");a.datepicker({showOn:"both",dateFormat:"yy-m-d",buttonImage:LINES.config.virtualDirectory+"Static/Images/template/calendar.gif",buttonText:"Select A Date",maxDate:"today",minDate:"-60D",buttonImageOnly:true})},applyFilter:function(){LINES.helpers.results.setSelectedFilter();LINES.helpers.results.update()},applyDateFilter:function(){LINES.helpers.results.setSelectedFilter();this.selectedLeagueId=0;LINES.helpers.results.update()},setSelectedFilter:function(){this.selectedSportId=$("#resultsFilterSport").val();this.selectedLeagueId=$("#resultsFilterLeague").val();this.selectedSorting=$("#resultsFilterSort").val();this.selectedDate=$("#resultsFilterDate").val()},applyYesterdayDate:function(){var b=new Date();var a=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+(b.getDate()-1);LINES.helpers.results.setSelectedFilter();$("#resultsFilterDate").val=a;this.selectedDate=a;this.selectedLeagueId=0;LINES.helpers.results.update()},applyTodayDate:function(){var a=new Date();var b=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();LINES.helpers.results.setSelectedFilter();$("#resultsFilterDate").val=b;this.selectedDate=b;this.selectedLeagueId=0;LINES.helpers.results.update()},filter:function(d){var c=$("#Results");var b=d.toString();var a=b.substr(b.lastIndexOf("/")+1);c.find(".resultsFilter").removeClass("selected");c.find("#resultsFilter").val(a);$(d).addClass("selected")},close:function(){LINES.utils.dropParameterFromHashTag("results");LINES.utils.showLines();LINES.helpers.results.closeHtml()},closeHtml:function(){$("#Results").addClass("hidden");$("#Results").find("content").html("");LINES.utils.hideLoadingDiv()}};LINES.routing={getStateFromMenuUrl:function(a){var c=a.split("/");var b=$.inArray("Asia",c);return{culture:c[b+1],sport:c[b+3],eventFilter:c[b+4],selectedLineViewType:c[b+5],selectedPeriodNumber:c[b+6],selectedTime:c[b+7],customerType:c[b+8],siteAccessType:c[b+9],oddsFormat:c[b+10],timeZoneId:c[b+11],isFattened:c[b+12]}},getUrl:function(){var b=LINES.config.virtualDirectory+"Asia/"+LINES.state.culture+"/";var a=function(c){if(c==null){c="null"}b+=c+"/"};$.each(arguments,function(d,c){if($.isArray(c)){$.each(c,function(g,f){a(f)})}else{a(c)}});return b},getLinesUrl:function(d,a){var c=LINES.state;var b=this.getUrl("GetLines",d,a,c.selectedLineViewType,c.selectedPeriodNumber,c.selectedTime,c.customerType,c.siteAccessType,LINES.enums.oddsFormatName[c.oddsFormat],c.timeZoneId,c.isFattened);return b},getBetUrl:function(b,c,f){var k=LINES.state;var g=LINES.enums;var d=k.selectedLineViewType;$.each(g.lineViewType,function(l,m){if(d==m){d=l;return false}return true});var j=["Bet",b,c,d,k.selectedPeriodNumber,k.selectedTime,k.customerType,k.siteAccessType,g.oddsFormatName[k.oddsFormat],k.timeZoneId];var h=f==null||f=="";if(k.isFattened){j.push("true")}else{if(!h){j.push("false")}}var a=this.getUrl(j);if(!h){a+="?selectedLeagueIds="+f}return a+window.location.hash},getBetMenuUrl:function(){var b=LINES.state;var a=this.getUrl("BetMenu",b.selectedEventFilterId,b.selectedLineViewType,b.customerType,b.siteAccessType,b.oddsFormat,b.timeZoneId,b.isFattened);return a},getUpdatesUrl:function(b,d,a,f){var c=(LINES.state.timeStamps[b]==undefined)?null:LINES.state.timeStamps[b];return LINES.config.virtualDirectory+"Asia/GetUpdates/?marketType="+b+"&timeStamp="+c+"&selectedEventFilterId="+d+"&selectedPeriodNumber="+a+"&selectedTime="+f}};LINES.helpers.selectBuySellLevels={enhancedInit:function(){$("#lines_area").on("change",".buySellLevels",function(a){LINES.helpers.selectBuySellLevels.select(this);return false})},select:function(f){var g=$(f);var l=g.parents(".LeagueContainer").attr("id");var h=LINES.helpers.League.getUniqueLeagueIdPieces(l);var j=h.leagueId;var m=h.sportId;var k=g.val();LINES.state.selectedBuySellLevels[j]=k;var b=LINES.state.urlParams.sportName;var c=LINES.state.urlParams.eventFilterName;var d={};var a={};a[LINES.state.selectedEventFilterId]=[];a[LINES.state.selectedEventFilterId].push(j);d[m]=a;LINES.helpers.betMenu.getLinesPromise(b,c,LINES.state.selectedBuySellLevels,d).done(function(p){try{if(p!=null&&p.LinesRequest!=null){var s=p.Sport;for(var t in s.Markets){var n=s.Markets[t];var r=n.GamesContainers[j];if(r==undefined){continue}var o=LINES.helpers.League.getUniqueLeagueId(LINES.enums.marketTypeName[n.Market],m,r.LeagueId);LINES.state.updateLeagueQueue.push({uniqueLeagueId:o,leagueJson:r,isNewLeague:false,cssViewType:s.CssViewType,isUpdate:false})}}LINES.utils.popups.closeAll();LINES.helpers.betMenu.state.isRendering(true);if(LINES.state.updateLeagueQueue.length>0){LINES.helpers.League.processLeagueQueue(m)}}catch(q){LINES.logError(q)}}).fail(function(n){LINES.logError(n)});LINES.ajax.session.postBuySellLevels(j,k)}};LINES.helpers.selectLeagues={enhancedInit:function(){$("#lines_area").on("click","#SelectLeaguesButton",function(){LINES.utils.showLoadingDiv($(this).parent(),"small","left");LINES.helpers.alternateLines.closeHtml();return LINES.helpers.selectLeagues.open(this)});var a=$("#SelectLeagues");a.on("click",".close",function(){return LINES.helpers.selectLeagues.close()});var b=$("#SelectLeagues");b.on("click",".SelectAll",function(){return LINES.helpers.selectLeagues.selectAll()});b.on("click",".DeselectAll",function(){return LINES.helpers.selectLeagues.deselectAll()});b.on("click",".Cancel",function(){return LINES.helpers.selectLeagues.close()});b.on("click",".Ok input",function(){return LINES.helpers.selectLeagues.ok()});if(!b.hasClass("hidden")){LINES.helpers.selectLeagues.position($("#SelectLeaguesButton"),true)}if(LINES.utils.getParameterByName("leagues",window.location.hash)!=null){this.open()}},selectAll:function(){$("#SelectLeagues .Content input:checkbox").attr("checked",true);return false},deselectAll:function(a){$("#SelectLeagues .Content input:checkbox").attr("checked",false);return false},isOpen:function(){return !($("#SelectLeagues").hasClass("hidden"))},updateHash:function(a){var c=$.toJSON(LINES.state.selectedLeagueIds);var f=LINES.state.selectedEventFilterId;var d="?";if(a.indexOf("?")>-1){d="&"}var b=a+d+"selectedEventFilterId="+f+"&selectedLeagueIds="+c;LINES.utils.addParameterToHashTag("leagues",b)},clearHash:function(){LINES.utils.dropParameterFromHashTag("leagues")},open:function(c){var f=$("#SelectLeagues").attr("class")=="hidden";var b=LINES.config.virtualDirectory+"Asia/GetSelectLeagues/";try{if(f){var a=new LINES.stopWatch2();a.startstop();$.ajax({type:"POST",url:b,data:{selectedEventFilterId:LINES.state.selectedEventFilterId,selectedLeagueIds:$.toJSON(LINES.state.selectedLeagueIds)},success:function(g){try{a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,false);$("#SelectLeagues").html(g);$("#SelectLeagues").removeClass("hidden");LINES.helpers.selectLeagues.position($(c),false);LINES.utils.hideLoadingDiv()}catch(h){}},error:function(h,j,g){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,true);LINES.utils.hideLoadingDiv();$("#SelectLeagues").html($("#errorMessage").html());$("#SelectLeagues").removeClass("hidden");LINES.helpers.selectLeagues.position($(c),false);if(g==undefined){g=""}LINES.logError(h.status+" "+j+" "+h.statusText+" "+g+" "+this.url,true,h.status)},dataType:"text"});this.updateHash(b)}else{LINES.utils.hideLoadingDiv();LINES.helpers.selectLeagues.close()}return false}catch(d){LINES.logError(d);return true}},closeHtml:function(){$("#SelectLeagues").addClass("hidden");$("#SelectLeagues").html("");this.clearHash()},close:function(){var b=LINES.config.virtualDirectory+"AsiaSession/SelectLinesArea?linesArea=Lines";LINES.helpers.selectLeagues.closeHtml();try{$.ajax({type:"POST",data:"test=test",url:b,dataType:"text"});this.clearHash();return false}catch(a){LINES.logError(a);return true}},ok:function(){try{var c=$("#SelectLeagues");var g=c.find("form").serialize();var b=g.indexOf("IsChecked=true")!=-1;if(b){var a=LINES.state.selectedSportId;if(LINES.state.selectedLeagueIds==null){LINES.state.selectedLeagueIds={}}if(typeof LINES.state.selectedLeagueIds[a]==="undefined"){LINES.state.selectedLeagueIds[a]={}}var f=LINES.state.selectedLeagueIds[a];f[LINES.state.selectedEventFilterId]=[];$("input[type=checkbox]",c).each(function(){if($(this).is(":checked")){var h=$(this).parent().find("input").val();f[LINES.state.selectedEventFilterId].push(h);LINES.state.selectedLeagueIds[a]=f}});LINES.ajax.session.postSelectLeagues(g);LINES.helpers.betMenu.loadLines(LINES.state.urlParams.sportName,LINES.state.urlParams.eventFilterName,false,true).fail(function(h){LINES.logError(h)});LINES.helpers.selectLeagues.closeHtml();this.clearHash()}else{alert(LINES.state.translationsStore["Please select at least one league"]);this.updateHash(LINES.config.virtualDirectory+"AsiaSession/SelectLeagues/")}return false}catch(d){LINES.logError(d);return true}},position:function(d,k){var c=$("#SelectLeagues");c.css("position","absolute");var f=0;if(d.offset()!=null){f=d.offset()}var a=$("#lines_area");var h=(-4);var j=a.offset();var b=0;if(j!=null){b=j.top}var g=f.top-b-h+a.scrollTop()+d.parent().height();c.css("top",g);c.css("right",3);c.removeClass("hidden")}};LINES.helpers.selectLineViewType={enhancedInit:function(){$("#lines_area").on("change","#lineViewType",function(){LINES.helpers.selectLineViewType.select();return false})},select:function(){try{var a=$("#lineViewType").val();if(a!=null){LINES.state.selectedLineViewType=a;try{LINES.helpers.betMenu.loadLines(LINES.state.urlParams.sportName,LINES.state.urlParams.eventFilterName,false,true)}catch(b){alert(b)}}}catch(b){alert(b);LINES.logError(b);return true}}};LINES.helpers.selectOddsFormat={enhancedInit:function(){$("#lines_area").on("change","#oddsFormat",function(){LINES.helpers.selectOddsFormat.select();return false})},select:function(){try{var b=$("#oddsFormat").val();if(b!=null){$.ajax({type:"POST",data:"oddsFormat="+b,url:LINES.config.virtualDirectory+"AsiaSession/SelectOddsFormat/",success:function(){LINES.reloadPage("LINES.helpers.selectOddsFormat.select()")},dataType:"text"})}}catch(a){LINES.logError(a);return true}}};LINES.helpers.selectPeriod={enhancedInit:function(){$("#lines_area").on("change","#period",function(){LINES.helpers.selectPeriod.select();return false})},select:function(){try{var b=$("#period").val();if(b!=null){LINES.state.selectedPeriodNumber=b;try{LINES.helpers.betMenu.loadLines(LINES.state.urlParams.sportName,LINES.state.urlParams.eventFilterName,false,true)}catch(a){}}}catch(a){LINES.logError(a);return true}}};LINES.helpers.selectTime={enhancedInit:function(){$("#lines_area").on("change","#time",function(){LINES.helpers.selectTime.select();return false})},select:function(){var b=$("#lines_area").find("#time").val();LINES.state.selectedTime=b;try{try{LINES.helpers.betMenu.loadLines(LINES.state.urlParams.sportName,LINES.state.urlParams.eventFilterName)}catch(a){}}catch(a){LINES.logError(a);return true}}};LINES.helpers.settings={enhancedInit:function(){$("#linkSettings").click(function(){LINES.helpers.settings.open();return false});LINES.helpers.settings.enableDefaulSports(true);var a=$("#Settings");a.on("click","#settingsBoxSave",function(){LINES.helpers.settings.save();return false});a.on("change","#defaultSportSelectionCustom",function(){LINES.helpers.settings.enableDefaulSports()});a.on("change","#defaultSportSelectionCurrent",function(){LINES.helpers.settings.enableDefaulSports()});a.on("click",".close",function(){LINES.helpers.settings.close();return false});var b=LINES.utils.getParameterByName("settings",window.location.hash);if(b){LINES.helpers.settings.open(b)}else{}},enableDefaulSports:function(){var a=$('input[name="defaultSportSelection"]:checked').val();if(a=="current"){$("#defaultSports").attr("disabled",true)}else{$("#defaultSports").attr("disabled",false)}},isOpen:function(){return !($("#Settings").hasClass("hidden"))},open:function(a){LINES.utils.popups.closeAllExcept("settings");LINES.utils.hideLines();$("#Settings").removeClass("hidden");LINES.helpers.settings.load(a)},load:function(b){var a=$("#Settings");LINES.utils.showLoadingDiv(a.find(".content"),"medium");if(b==null){b=LINES.config.virtualDirectory+"Asia/Settings/"}LINES.utils.removeAllHashtags();LINES.helpers.settings.ajaxUpdate(b)},ajaxUpdate:function(b){LINES.helpers.settings.updateHashTag(b);var a=new LINES.stopWatch2();a.startstop();$.ajax({type:"POST",url:b,success:function(c){a.startstop();LINES.utils.logNetworkCall(a.Getms(),b,false);LINES.utils.hideLoadingDiv();$("#Settings").html(c);LINES.helpers.settings.enableDefaulSports()},dataType:"text"})},updateHashTag:function(a){LINES.utils.addParameterToHashTag("settings",a)},save:function(){LINES.utils.showLoadingDiv($("#Settings"),"medium");var c=$("#defaultOdds").val();var a=$("#defaultTimeZone").val();var f=$("#defaultSports").val();var b=$('input[name="defaultSportSelection"]:checked').val();if(b=="current"){f=null}var d=LINES.config.virtualDirectory+"Asia/Settings/"+c+"/"+a+"/"+f;$.ajax({type:"POST",url:d,success:function(g){LINES.utils.hideLoadingDiv();alert(LINES.state.translationsStore["Saved successfully"]);window.location.href=LINES.config.virtualDirectory},dataType:"text"})},close:function(){LINES.utils.dropParameterFromHashTag("settings");LINES.utils.showLines();LINES.helpers.settings.closeHtml()},closeHtml:function(){LINES.utils.dropParameterFromHashTag("settings");$("#Settings").addClass("hidden");$("#Settings").find(".noresults").html("");LINES.utils.hideLoadingDiv()}};LINES.helpers.Sport=function(){var b=$.makeArray(arguments);this.sportId=b.shift();this.isUpdate=b.shift();this.sportJson=b.shift();var a=b.shift();a=a==undefined?false:a;this.domElement=$("#"+this.sportId);this.oldMarketList={};if(!a&&this.exists()){try{if(!this.isUpdate){this.updateHeader();this.oldMarketList=LINES.helpers.Sport.getMarketListEnum(this.sportId)}}catch(c){c.message="LINES.helpers.Sport ctr -> "+c.message;throw c}}else{try{this.create();this.updateHeader();this.attach()}catch(c){c.message="LINES.helpers.Sport ctr -> "+c.message;throw c}}};LINES.helpers.Sport.prototype.exists=function(){return $("#"+this.sportId).exists()};LINES.helpers.Sport.prototype.create=function(){try{var b=$("#lines");var d=b.find(".sportContainer").attr("id");if(d!==undefined){LINES.helpers.Sport.close(d)}var a=LINES.helpers.Sport.getTemplate();a.attr("id",this.sportId);a.find(".sportName").html(this.sportJson.SportName.toUpperCase());a.find(".sportSortOrder").html(this.sportJson.SortOrder);this.domElement=a}catch(c){c.message="sport create: "+c.message;throw c}};LINES.helpers.Sport.prototype.attach=function(){try{$("#lines").html(this.domElement);return this}catch(a){a.message="sport attach: "+a.message;throw a}};LINES.helpers.Sport.prototype.updateHeader=function(){try{if(this.sportJson.CssViewType==LINES.enums.cssViewType.Taiwan||this.sportJson.CssViewType==LINES.enums.cssViewType.Moneyline||this.sportJson.CssViewType==LINES.enums.cssViewType.TeamTotal){this.domElement.find("#lineViewType").addClass("hidden");this.updateDropdownList("time",this.sportJson.Times).updateDropdownList("period",this.sportJson.Periods)}else{this.updateDropdownList("time",this.sportJson.Times).updateDropdownList("period",this.sportJson.Periods).updateDropdownList("lineViewType",this.sportJson.LineViewTypes)}return this}catch(a){a.message="sport updateHeader: "+a.message;throw a}};LINES.helpers.Sport.prototype.updateDropdownList=function(g,f){if(f!=undefined){var b="";for(var a in f){var d=f[a];var c=(d.IsSelected)?'selected="selected"':"";b+='<option value="'+d.Id+'" '+c+">"+d.Text+"</option>"}this.domElement.find("#"+g).html(b);this.domElement.find("#"+g).removeClass("hidden")}else{this.domElement.find("#"+g).addClass("hidden")}return this};LINES.helpers.Sport.prototype.updateMarkets=function(k){var E=$.Deferred();var u=[];var j=[];try{var f=this.oldMarketList;var c=this.sportJson;var D=[];var p=[];var t=[];var q=null;var r=LINES.state.uniqueLeagueIdStore.clone();if(!this.isUpdate){LINES.state.timeStamps={}}for(var v in c.Markets){var z=[];var A=[];var m=[];var d=c.Markets[v];var s=LINES.enums.marketTypeName[d.Market];delete f[s];var o=new LINES.helpers.Market(s,this.sportId,c.SportName,c.CssViewType);if(!o.exists()){o.create(d.MarketName,d.HeaderLabels);D.push(s)}else{p.push(s);o.updateHeaderLabels(d.HeaderLabels)}if(o.exists()){var n=false;for(var g in d.GamesContainers){n=true;var B=d.GamesContainers[g];var b=LINES.helpers.League.getUniqueLeagueId(s,this.sportId,g);if(!LINES.helpers.League.doesLeagueExist(b)){if(LINES.utils.canLog("lines.sport")){z.push(b)}o.addLeague(b,B,this.isUpdate,c.CssViewType)}else{if(LINES.utils.canLog("lines.sport")){A.push(b)}LINES.state.updateLeagueQueue.push({uniqueLeagueId:b,leagueJson:B,isNewLeague:false,cssViewType:c.CssViewType,isUpdate:this.isUpdate})}LINES.state.uniqueLeagueIdStore.add(s,b);LINES.utils.assert("lines.sport",LINES.state.uniqueLeagueIdStore[s].hasId(b),"Missing league id in state: "+b);r.remove(s,b)}o.setHideMarket(d.HideMarket,this.isUpdate)}for(var a in r[s].uniqueIds){u.push(a);if(LINES.utils.canLog("lines.sport")){m.push(a)}}LINES.state.timeStamps[s]=k;var y=function(F,l){if(F.length==0){LINES.utils.log("lines.sport",l)}else{LINES.utils.warn("lines.sport",l)}};if(LINES.utils.canLog("lines.sport")){y(z,s+", leagues added: ("+z.length+")"+z.join(","));y(A,s+", leagues changed:("+A.length+")"+A.join(","));y(m,s+", leagues removed:  ("+m.length+")"+m.join(",")+"\n")}}for(var w in f){q=LINES.helpers.Market.getUniqueMarketId(w,this.sportId);j.push(q);t.push(w)}}catch(C){E.reject(C)}var h=function(){E.resolve(D,p,t)};LINES.helpers.Market.close(j).done(function(){if(u.length==0){h()}else{LINES.helpers.League.closeLeagues(null,u).done(function(){h()}).fail(function(l){l.message="LINES.helpers.League.closeLeagues.fail: "+l.message;E.reject(l)})}});return E.promise()};LINES.helpers.Sport.getTemplate=function(){var a;if(LINES.state.template.sport!=undefined){a=LINES.state.template.sport}else{a=$("#templateDiv").find(".sportContainer").eq(0).clone();a.find(".MarketContainer").remove();LINES.state.template.sport=a}return a.clone()};LINES.helpers.Sport.close=function(a){LINES.state.nochangeStore=new LINES.state.IdCache();LINES.state.uniqueLeagueIdStore=new LINES.state.IdCache();$("#"+a).remove()};LINES.helpers.Sport.getSportId=function(b){var c=b.split("_");var a=c[1];if(a==undefined){throw"Sport.getSportId: sportId is undefined."}return a};LINES.helpers.Sport.getMarketListEnum=function(a){var b=LINES.helpers.Sport.getMarketList(a);var c={};$.each(b,function(f,h){var d=$(h).attr("id");var g=LINES.helpers.Market.getUniqueMarketIdPieces(d);c[g.marketType]=g.marketType});return c};LINES.helpers.Sport.getUniqueLeagueIdList=function(a){var c=[];for(var b in LINES.enums.marketType){var d=LINES.helpers.Market.getUniqueLeagueIdList(LINES.helpers.Market.getUniqueMarketId(b,a));c=$.merge(c,d)}return c};LINES.helpers.Sport.getSportName=function(a){var b=$("#"+a).find("h2.sportName").text();return $.trim(b)};LINES.helpers.Sport.getMarketList=function(a){return $("#"+a).find(".MarketContainer").get()};LINES.helpers.Sport.getLatestServerTimeStamp=function(){var b=LINES.state.timeStamps[LINES.enums.marketType.Live];var a=LINES.state.timeStamps[LINES.enums.marketType.Today];var c=LINES.state.timeStamps[LINES.enums.marketType.Early];if(b!=undefined&&a!=undefined&&c!=undefined){if(b>=a||b>=c){return b}if(a>=b||a>=c){return a}if(c>=b||c>=a){return c}}else{if(b!=undefined&&a!=undefined){if(b>=a){return b}if(a>=b){return a}}else{if(b!=undefined&&c!=undefined){if(b>=c){return b}if(c>=b){return c}}else{if(c!=undefined&&a!=undefined){if(c>=a){return c}if(a>=c){return a}}else{if(b!=undefined){return b}else{if(a!=undefined){return a}else{if(c!=undefined){return c}}}}}}}return""};LINES.helpers.Sport.addMarket=function(a,d,c){var f=LINES.helpers.Sport.getMarketList(a);if(LINES.utils.objectSize(f)==0){$("#"+a).append(c)}else{if(d==LINES.enums.marketType.Live){$(f).eq(0).before(c)}else{if(d==LINES.enums.marketType.Today){if(!LINES.helpers.Market.doesMarketExist(LINES.helpers.Market.getUniqueMarketId(LINES.enums.marketType.Early,a))){$("#"+a).append(c)}else{var b=LINES.helpers.Market.getUniqueMarketId(LINES.enums.marketType.Early,a);$("#"+b).before(c)}}else{$("#"+a).append(c)}}}c=null};LINES.helpers.Sport.processLinesContainer=function(d,a,c){var b=$.Deferred();var f=function(j,h){if(h!=null){h.message=j+": "+h.message}else{h=new Error(j)}b.reject(h)};var g=function(){return LINES.helpers.betMenu.state.isCancelled()};LINES.utils.tryExec(b,function(){if(!d||!d.LinesRequest||g()){return}LINES.stopWatch.swreset();var l=d.Sport;var h=d.Sport.SportId;var k=(a==null)?false:true;var j=new LINES.helpers.Sport(h,k,l,c);j.updateMarkets(d.TimeStamp).fail(function(m){f("sportHelper.updateMarkets.fail",m)}).done(function(p,o,q){try{var n=$.merge(p,o);if(g()){b.resolve();return}var m=$("#lines_area");for(var s in LINES.enums.marketType){LINES.state.refreshButtonList[s]=m.find(".market_header .rfsh ."+s)}LINES.helpers.League.processLeagueQueue(h).done(function(){try{$.each(n,function(u,y){var w=LINES.helpers.Market.getUniqueMarketId(y,h);var v=LINES.helpers.Market.getLeagueList(w);if(v==undefined||v.length===0){LINES.helpers.Market.addNoEventsMessage(w)}});b.resolve()}catch(t){f("LINES.helpers.League.processLeagueQueue.done",t)}}).fail(function(t){f("LINES.helpers.League.processLeagueQueue.fail",t)})}catch(r){f("sportHelper.updateMarkets.done",r)}}).fail(function(m){f("sportHelper.updateMarkets.fail",m)}).always(function(){d=null;if(typeof(CollectGarbage)=="function"){CollectGarbage()}})},"LINES.helpers.Sport.processLinesContainer");return b.promise()};LINES.helpers.statement={enhancedInit:function(){$("#linkStatement").click(function(){LINES.helpers.statement.open();return false});var a=$("#Statement");a.on("click",".close",function(){LINES.helpers.statement.close();return false});a.on("click",".refresh",function(){LINES.helpers.statement.buildHashUrl();return false});a.on("click",".link",function(){LINES.helpers.statement.click($(this));return false});a.on("click",".linkRow",function(){LINES.helpers.statement.click($(this).find(".link"));return false});a.on("mousemove",".linkRow",function(){$(this).addClass("clickable")});a.on("mouseleave",".linkRow",function(){$(this).removeClass("clickable")});a.on("click",".statementFilter",function(){LINES.helpers.statement.filter(this);return false});$("#Statement").on("click",".retry",function(){LINES.helpers.statement.refresh();return false});var b=LINES.utils.getParameterByName("statement",window.location.hash);if(b){LINES.helpers.statement.open(b)}},isOpen:function(){return !($("#Statement").hasClass("hidden"))},open:function(a){LINES.utils.popups.closeAllExcept("statement");LINES.utils.hideLines();$("#Statement").removeClass("hidden");LINES.helpers.statement.refresh(a)},refresh:function(c){if(c==null||c==""){c=LINES.config.virtualDirectory+"Asia/Statement/"+$("#statementFilter").val()+"?customerId="+LINES.state.customerId}LINES.utils.removeAllHashtags();LINES.utils.addParameterToHashTag("statement",c);var b=$("#Statement");LINES.utils.showLoadingDiv(b.find(".content"),"medium");var a=new LINES.stopWatch2();a.startstop();$.ajax({type:"POST",url:c,data:"test=test",success:function(d){a.startstop();LINES.utils.logNetworkCall(a.Getms(),c,false);LINES.utils.hideLoadingDiv();b.html(d)},error:function(f,g,d){a.startstop();LINES.utils.logNetworkCall(a.Getms(),c,true);LINES.utils.hideLoadingDiv();b.find(".content").html($("#errorMessageSlim").html());if(d==undefined){d=""}LINES.logError(f.status+" "+g+" "+f.statusText+" "+d+" "+this.url,true,f.status)},dataType:"text"})},filter:function(f){var c=$("#Statement");var a=f.toString();var d=a.substr(a.lastIndexOf("/")+1);c.find(".statementFilter").removeClass("selected");c.find("#statementFilter").val(d);$(f).addClass("selected");var b=LINES.config.virtualDirectory+"Asia/Statement/"+d+"?customerId="+LINES.state.customerId;LINES.helpers.statement.refresh(b)},buildHashUrl:function(){var a=LINES.utils.getParameterByName("statement",window.location.hash);LINES.helpers.statement.refresh(a)},closeHtml:function(){LINES.utils.dropParameterFromHashTag("statement");$("#Statement").addClass("hidden");$("#Statement").find("content").html("");LINES.utils.hideLoadingDiv()},close:function(){var a=$("#Statement").find(".close").attr("href");LINES.helpers.statement.closeHtml();LINES.utils.showLines();$.ajax({type:"POST",url:a,data:"test=test",dataType:"text"})},click:function(b){var a=b.attr("href");LINES.helpers.fullBetList.clickFromStatement(a,LINES.enums.betListDuration.ByDay)}};LINES.helpers.tabs={hashConfig:{sport:{tabName:LINES.enums.tab.Menu},wager:{tabName:LINES.enums.tab.Wager},line:{tabName:LINES.enums.tab.Ticket},ticket:{tabName:LINES.enums.tab.Pending}},enhancedInit:function(){$("#tabs").on("click","li",function(){return LINES.helpers.tabs.clickTab($(this))});LINES.utils.removeAllUnknownHashtags();var a=this.getTabNameFromHash();if(a){this.loadTab(a);this.selectTab(a)}else{this.selectTab(LINES.enums.tab.Menu)}},activateTabWithHash:function(){var d=$.makeArray(arguments);if(d.length===0){return}var g=d.shift();if(g===undefined){return}var f=d.shift();var a=d.shift();a=a===undefined?true:a;f=f===undefined?null:f;var c=this.hashConfig[g];for(var b in this.hashConfig){if(b==g){if(f==null){f=c.hashValue}else{c.hashValue=f}if(a){LINES.utils.addParameterToHashTag(g,f)}break}}},getHashNameFromTabName:function(b){for(var a in this.hashConfig){if(this.hashConfig[a].tabName==b){return a}}return null},getTabNameFromHash:function(){var f=LINES.utils.getParametersByName(window.location.hash);var d=f.getKeys();if($.inArray("tab",d)>-1){var g=f.tab;return g}for(var c=0;c<d.length;c++){var b=d[c];for(var h in this.hashConfig){if(h!=b){continue}var a=this.hashConfig[h];if(a==null){continue}g=f[h];a.hashValue=g;LINES.utils.addParameterToHashTag("tab",a.tabName);return a.tabName}}return null},clickTab:function(a){try{var c=a.attr("id").replace("Tab","");this.selectTab(c);this.loadTab(c);return false}catch(b){LINES.logError(b);return true}},loadTab:function(b){try{$.ajax({type:"POST",data:"test=test",url:LINES.config.virtualDirectory+"AsiaSession/SelectTab?tab="+b});return false}catch(a){LINES.logError(a);return true}},selectTab:function(d){var b=$("#tabs");var a=b.find("#"+d+"Tab");LINES.utils.addParameterToHashTag("tab",d);this.activateTabWithHash(this.getHashNameFromTabName(d));if(!a.hasClass("selectedtab")){b.find("ul").removeClass("selectedtabgroup").addClass("tabgroup");b.find("li").removeClass("selectedtab");a.addClass("selectedtab");a.parent().removeClass("tabgroup").addClass("selectedtabgroup");LINES.utils.hideLoadingDiv("betMenu");LINES.utils.hideLoadingDiv("acceptedWagerList");LINES.utils.hideLoadingDiv("pendingBetList");LINES.utils.hideLoadingDiv("ticketWagers");var c=$("#tabsContent");c.children("div").removeClass("hidden").addClass("hidden");c.find("#"+d+"Content").removeClass("hidden");LINES.state.pendingListTimerEnabled=false;if(d==LINES.enums.tab.Wager){LINES.helpers.miniBetList.loadBetList()}else{if(d==LINES.enums.tab.Pending){LINES.helpers.pendingBetList.loadBetList()}}}}};LINES.timers={mainCountDown:function(){try{if(LINES.state.addEventQueue.length==0&&LINES.state.updateLeagueQueue.length==0){for(var c in LINES.helpers){var b=LINES.helpers[c];if(b.countDown!=undefined){b.countDown()}}}}catch(a){LINES.logError(a)}setTimeout(LINES.timers.mainCountDown,1000)}};LINES.stopWatch=(function StopWatch(){var a=0;var b=0;this.startstop=function(){if(b==0){b=1;then=new Date();then.setTime(then.getTime()-a)}else{b=0;now=new Date();a=now.getTime()-then.getTime();c()}};this.swreset=function(){b=0;a=0};function c(){}return this})();LINES.stopWatch2=function(){this.ms=0;this.state=0;return this};LINES.stopWatch2.prototype.startstop=function(){if(this.state==0){this.state=1;this.then=new Date();this.then.setTime(this.then.getTime()-this.ms)}else{this.state=0;this.now=new Date();this.ms=this.now.getTime()-this.then.getTime()}};LINES.stopWatch2.prototype.swreset=function(){this.state=0;this.ms=0};LINES.stopWatch2.prototype.Getms=function(){return this.ms};LINES.stopWatch2.prototype.Getstate=function(){return this.state};LINES.userPrefs=(function(){var a=null;function b(){if(a===null){a=$("#userPrefs")}return a}return{add:function(f,h){if(f==null||f==""){return}if(h==null){h=""}var g=b();var d="tab_"+f;var c=g.find("#"+d).val();if(c==undefined){g.append('<input type="hidden" id="'+d+'" name="'+d+'" value="'+h+'" />')}else{g.find("#"+d).val(h)}},remove:function(d){if(d==null||d==""){return}var c="tab_"+d;$("#"+c).remove()},submit:function(){$("#userPrefsSubmitButton").click()}}})();LINES.utils={hashNames:["results","statement","fullBetList","alternateLines","settings","leagues"],objectSize:function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b},addCommas:function(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2},showLines:function(){$("#lines").removeClass("hidden")},hideLines:function(){$("#lines").addClass("hidden")},showLoadingDiv:function(f,h,d,j,b,o){if(f==undefined||!f.exists()){return}var m=f.offset();if(m==undefined){return}var c=m.left;var n=m.top;var a=f.outerHeight();var l=f.outerWidth();if(j===undefined){j=false}if(o!=undefined&&o!=""){c+=o;l-=o}var p;var g;if(j){var k;if(b!=undefined){k=b}else{k=f.attr("id")}g=$("#loadingDiv").clone();p=$("#loadingDivImg").clone();g.attr("id",k+"loadingDiv");p.attr("id",k+"loadingDivImg");g.appendTo("#divMain");p.appendTo("#divMain")}else{g=$("#loadingDiv");p=$("#loadingDivImg")}p.removeClass("medium").removeClass("small").removeClass("left");p.addClass(h);if(d!=undefined&&d!=""){p.addClass(d)}g.css({top:n,left:c});g.height(a).width(l);p.css({top:n,left:c});p.height(a).width(l);g.removeClass("hidden");p.removeClass("hidden")},hideLoadingDiv:function(b){if(b===undefined){var c;var a;c=$("#loadingDiv");a=$("#loadingDivImg");c.css({top:0,left:0});c.height(0).width(0);a.css({top:0,left:0});a.height(0).width(0);a.addClass("hidden");c.addClass("hidden")}else{$("#"+b+"loadingDiv").remove();$("#"+b+"loadingDivImg").remove()}},getFirstKey:function(a){for(var b in a){return b}},insertSoftHyphens:function(d,g){var f="";var a=d.length/g;var c="&shy;";for(var b=0;b<a;b++){f+=d.substr(b*g,g);if(b<a-1){f+=c}}return f},getParametersByName:function(){var a={};a.getKeys=function(){var j=[];for(o in a){if(o!="getKeys"){j.push(o)}}return j};if(arguments.length<1){return a}var n=arguments[0];if(n=="#_"){return a}if(n.substr(0,1)=="#"||n.substr(0,1)=="?"){n=n.substring(1)}var d=n.split("#");n=d[0];if(d.length>1){var m=d[1];if(m!=null&&m!="_"){if(m.substr(0,1)=="?"||m.substr(0,1)=="&"){m=m.substring(1)}n=n+"&"+m}}var b=n.split("&");for(var g=0;g<b.length;g++){var f=b[g].split("=");var o=f[0];if(o==null){continue}var l=null;if(f.length>1){l=f[1]}var h=this;var q=function(j,t){if(t==j){var s=null;if(l!=null){s=h.decodeHashUrlValue(l)}a[o]=s;return true}return false};if(arguments.length==1){q(o,o)}else{for(var c=1;c<arguments.length;c++){var k=arguments[c];var r=false;if($.isArray(k)){for(var p=0;p<k.length;p++){r=q(k[p],o);if(r){break}}}if(r||q(k,o)){break}}}}return a},getParameterByName:function(b,a){if(!a){a=location.search}var c=this.getParametersByName(a,b);if(c.hasOwnProperty(b)){return c[b]}return null},dropParametersFromHashTag:function(){var h=window.location;var j=h.hash;var f=this;if(arguments.length==0||j==""||j.substr(0,1)!="#"){if(h.hash=="#"||h.hash==""){h.hash="#_"}return}var d="#";var g=this.getParametersByName(j);var b=$.makeArray(arguments);var c=g.getKeys();var a=function(m,l){if(m==l){var n=$.inArray(m,c);if(n>-1){c.splice(n,1);return true}}return false};$.each(g,function(l,k){LINES.userPrefs.remove(l);for(var r=0;r<b.length;r++){var m=b[r];var p=m;var n=false;if($.isArray(m)){for(var q=0;q<m.length;q++){p=m[q];n=a(l,p);if(n){break}}}if(n||a(l,p)){break}}});$.each(c,function(l,k){if(l>0){d+="&"}var m=f.encodeHashUrlValue(g[k]);d+=k+"="+m;LINES.userPrefs.add(k,m)});if(d==null||d=="#"){d="#_"}h.hash=d},dropParameterFromHashTag:function(a){this.dropParametersFromHashTag(a)},addParametersToHashTag:function(f){var d=window.location;var c="#";var g=this.getParametersByName(d.hash);var b=g.getKeys();var a=this;$.each(f,function(k,j){g[k]=j;var h=$.inArray(k,b);if(h==-1){b.push(k)}});$.each(b,function(j,h){if(j>0){c+="&"}var k=g[h];if(k==null){k=""}else{k=a.encodeHashUrlValue(k)}c+=h+"="+k;LINES.userPrefs.add(h,k)});if(c==null||c=="#"){c="#_"}c=c.replace("#=&","#");d.hash=c},addParameterToHashTag:function(b,c){var a={};a[b]=c;this.addParametersToHashTag(a)},removeAllHashtags:function(){this.dropParametersFromHashTag(this.hashNames)},getAllKnownHashNames:function(){var b=this.hashNames.slice();for(var a in LINES.helpers.tabs.hashConfig){b.push(a)}b.push("tab");return b},getAllUnknownHashNames:function(){var b=this.getParametersByName(window.location.hash).getKeys();var a=this.getAllKnownHashNames();var c=[];$.each(b,function(d,f){if($.inArray(f,a)==-1){c.push(f)}});return c},removeAllUnknownHashtags:function(){var a=this.getAllUnknownHashNames();this.dropParametersFromHashTag(window.location.hash,a)},popups:(function(){var b=["fullBetList","results","statement","settings"];var a=$.merge(b.slice(0),["alternateLines","selectLeagues"]);var c=function(g){var f="";f=$.isNumeric(g)?a[parseInt(g,10)]:g;var d=LINES.helpers[f];return d==undefined?null:d};return{hoverPopups:b,close:function(){var f=false;var d=LINES.utils.flattenArray(arguments,false);$.each(d,function(h,j){var g=c(j);if(g!=null&&$.isFunction(g.closeHtml)){g.closeHtml();f=true}});LINES.utils.showLines();return f},closeAll:function(){$.each(a,function(f,d){LINES.helpers[d].closeHtml()});LINES.utils.showLines()},closeAllExcept:function(){if(arguments.length===0){return false}var d=LINES.utils.flattenArray(arguments,false);var f=$.grep(a,function(h,g){return $.inArray(h,d)===-1});return this.close(f)},anyOpen:function(){var f=false;var d=null;if(arguments.length===0){d=a}else{d=LINES.utils.flattenArray(arguments,false)}$.each(d,function(h,j){var g=LINES.helpers[j];if(g!=null&&$.isFunction(g.isOpen)!==undefined&&g.isOpen()){f=true;return false}return true});return f}}})(),getCookie:function(b){var c=document.cookie;var d=c.indexOf(" "+b+"=");if(d==-1){d=c.indexOf(b+"=")}if(d==-1){c=null}else{d=c.indexOf("=",d)+1;var a=c.indexOf(";",d);if(a==-1){a=c.length}c=unescape(c.substring(d,a))}return c},logNetworkCall:function(a,b,g){if(LINES.state.canLogCustomer){if(LINES.state.countNetworkCalls==0){LINES.state.debugLog={profile:{},items:[]}}LINES.state.countNetworkCalls++;var f=LINES.helpers.Sport.getLatestServerTimeStamp();var k={callTime:a,url:escape(b),isError:(g==true),approxTime:f};LINES.state.debugLog.items.push(k);if(LINES.state.countNetworkCalls==LINES.config.limitNetworkCallLog){var h=window.screen.width+" x "+window.screen.height;var j=navigator.userAgent;var d={customerId:LINES.state.customerId,userAgent:j,screen:h,timeUnit:"ms"};LINES.state.debugLog.profile=d;var c="cust="+LINES.state.customerId+"&error="+$.toJSON(LINES.state.debugLog);$.ajax({type:"POST",url:LINES.config.virtualDirectory+"App/LogNetworkError/",data:c,dataType:"text"});LINES.state.countNetworkCalls=0;LINES.state.debugLog={profile:{},items:[]}}}},encodeHashUrlValue:function(a){return a.split("?").join("__").split("&").join("^^").split("#").join("**").split("=").join("--")},decodeHashUrlValue:function(a){return a.split("__").join("?").split("^^").join("&").split("**").join("#").split("--").join("=")},flattenArray:function(h,f){var c=[];var a=function(j){if(f){if(j!=null&&$.inArray(j,c)===-1){c.push(j)}}else{c.push(j)}};for(var g=0;g<h.length;g++){var d=h[g];if($.isArray(d)){for(var b=0;b<d.length;b++){a(d[b])}}else{a(d)}}return c},logs:(function(){var a={};this.enable=function(){var b=function(c){if(window.console){console.log("enabling "+c+" log")}a[c]=true};if(arguments.length==0){$.each(a,function(d,c){b(d)})}else{$.each(arguments,function(d,c){b(c)})}};this.disable=function(){var b=function(c){if(window.console){console.log("disabling "+c+" log")}a[c]=false};if(arguments.length==0){$.each(a,function(d,c){b(d)})}else{$.each(arguments,function(d,c){b(c)})}};this.isEnabled=function(b){return a[b]===true};this.getNames=function(){return a};this.learn=function(){$.each(arguments,function(c,b){if(a[b]==undefined){a[b]=false}})};return this})(),canLog:function(a){LINES.utils.logs.learn(a);return LINES.utils.logs.isEnabled(a)},log:function(a,b){LINES.utils.logs.learn(a);if(window.console&&LINES.utils.canLog(a)){window.console.log("["+a+"] "+b)}},warn:function(a,b){LINES.utils.logs.learn(a);if(window.console&&LINES.utils.canLog(a)){window.console.warn("["+a+"] "+b)}},error:function(b,d){LINES.utils.logs.learn(b);var a=(d!=undefined&&d.stack!=undefined)?d.stack:"";var c=d+" "+$.toJSON(d)+" "+a;if(window.console&&LINES.utils.canLog(b)){window.console.error("["+b+"] "+c)}},assert:function(a,c,b){LINES.utils.logs.learn(a);if(window.console&&LINES.utils.canLog(a)){window.console.assert(c,b)}},isIE7or8:function(){return $.browser.msie!=undefined&&parseInt($.browser.version,10)<9},isIE7:function(){return $.browser.msie!=undefined&&parseInt($.browser.version,10)<8},sleep:function(a){return this.delay(null,a)},delay:function(c,b){if(c==null){c=function(){}}var a=$.Deferred();setTimeout(function(){try{a.resolve(c())}catch(d){a.reject(d)}},b);return a.promise()},delayedForEach:function(){var k=$.makeArray(arguments);var h=k.shift();var b=k.shift();if(h==null||b==null||!$.isArray(h)||h.length==0){return this.sleep(0)}if($.isFunction(b)){var c=b;var g=k.shift();if(g==undefined){g=0}b={action:c,delay:g}}if(!$.isFunction(b.isCancelled)){b.isCancelled=function(){return LINES.helpers.betMenu.state.isCancelled()}}if(b.deferred==undefined){b.deferred=$.Deferred()}if(b.isCancelled()){b.deferred.resolve()}else{try{if(!$.isNumeric(b.counter)){b.counter=0}var f=b.counter;var n=h.shift();if(n==undefined){b.deferred.resolve()}else{var m=0;if(this.isIE7()){if($.isNumeric(b.delay)){m=b.delay}if($.isNumeric(b.chunkSize)){var o=b.chunkSize;if($.isNumeric(b.chunkDelay)){var d=b.chunkDelay;var l=(1+f)%o==0;if(l&&m==0){m=d}}}}var a=$.isFunction(b.action);if(a){a=b.action(f,n)}b.counter++;if(a===false||h.length==0){b.deferred.resolve()}else{setTimeout(function(){LINES.utils.delayedForEach(h,b)},m)}}}catch(j){b.deferred.reject(j)}}return b.deferred.promise()},toEmptyPromise:function(){var a=arguments.length<1||arguments[0]==null?$.Deferred():arguments[0];a.resolve();return a.promise()},tryExec:function(a,c,b){try{c();return true}catch(d){if(b){d.message=b+": "+d.message;a.reject(d)}else{a.reject(d)}return false}},toUnicodeSequence:function(b){try{return b.replace(/[\s\S]/g,function(d){return"\\u"+("000"+d.charCodeAt(0).toString(16)).slice(-4)})}catch(a){return""}},testErrorLog:function(){var a=new Error("test error log ");LINES.logError(a)}};