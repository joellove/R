var PSPARLAYTICKET=(function(a,b){a.initialize=function(){var c=b("#parlayTicketContainer");c.on("click","a.pt_close",function(){a.removeLeg(this);return false});c.on("click","a#pt_selectAll",function(){a.selectAll();a.calculateMaxPayout();return false});c.on("click","a#pt_deselectAll",function(){a.deselectAll();a.calculateMaxPayout();return false});c.on("click",'.pt_multibetoptions input[type="checkbox"]',function(){a.changeLink();a.hideUnhideParlayOdss();a.calculateMaxPayout()});c.on("keydown","#pt_riskAmount",function(d){a.allowOnlyValidCharacters(d)});c.on("keyup","#pt_riskAmount",function(){a.hideUnhideParlayOdss();a.calculateMaxPayout()});c.on("blur","#pt_riskAmount",function(){a.formatStake();a.calculateMaxPayout()});c.on("click",".pt_submit A",function(){a.submitTicket();return false});c.on("submit","#pt_submitForm",function(){a.submitTicket();return false})};a.loadTicket=function(c){var d=b("#parlayTicketContainer");b("#emptyBetTicket").addClass("hidden");b("#ticketWagers").addClass("hidden");d.removeClass("hidden");var e=d.find("#pt_source").val();if(e=="Asia"){LINES.utils.showLoadingDiv(d,"medium","center",true)}b.ajax({type:"GET",url:c,success:function(f){d.html(f);if(e=="Asia"){LINES.utils.hideLoadingDiv("parlayTicketContainer")}},dataType:"text"})};a.addLeg=function(c){var d=b("#parlayTicketContainer");b("#emptyBetTicket").addClass("hidden");b("#ticketWagers").addClass("hidden");d.removeClass("hidden");var e=d.find("#pt_source").val();if(e=="Asia"){LINES.utils.showLoadingDiv(d,"medium","center",true)}b.ajax({type:"GET",url:c,success:function(f){d.html(f);if(e=="Asia"){LINES.utils.hideLoadingDiv("parlayTicketContainer")}var g=d.find(".pt_overlayMessage .messagetext");if(g.length){alert(g.html())}},dataType:"text"})};a.removeLeg=function(c){var d=b("#parlayTicketContainer");var e=d.find("#pt_source").val();if(e=="Asia"){LINES.utils.showLoadingDiv(d,"medium","center",true);b.ajax({type:"GET",url:c,success:function(f){d.html(f);LINES.utils.hideLoadingDiv("parlayTicketContainer")},dataType:"text"})}};a.clearTicket=function(c){alert(c)};a.submitTicket=function(){var d=b("#parlayTicketContainer");var f=d.find("#pt_source").val();if(f=="Asia"){if(!d.find(".pt_submit").hasClass("disabled")){var e=d.find("#pt_riskAmount").val();if(e==""||e==0){var h=d.find("#pt_stakeEmptyMessage").val();alert(h)}else{var g=a.updateTotalRisk();if(confirm(g)){if(f=="Asia"){LINES.utils.showLoadingDiv(d,"medium","center",true)}var c=d.find(".pt  FORM");b.ajax({type:c.prop("method"),url:c.prop("action"),data:c.serialize(),dataType:"text",success:function(i){d.html(i);if(f=="Asia"){LINES.utils.hideLoadingDiv("parlayTicketContainer")}var j=d.find(".pt_overlayMessage .messagetext");if(f=="Asia"&&j.length){alert(j.html())}}})}}}}};a.updateTotalRisk=function(){var e=b("#parlayTicketContainer");var f=e.find("#pt_riskAmount").val().replace(/,/g,"");a.calculateTotalBets();var g=e.find("#pt_maxPayout").html();var c=e.find("#pt_currencyCode").html();var h=e.find("#pt_acceptanceMessage").val();var d=(parseFloat(e.find("#pt_totalbets").val())*parseFloat(f));d=a.toFixed(d,2).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");h=h.replace("{0}",d+" "+c);h=h.replace("{1}",g+" "+c);e.find("#pt_acceptanceMessageFormatted").val(h);return h};a.hideUnhideParlayOdss=function(){var d=b("#parlayTicketContainer");var c=d.find("#pt_parlayOdds");var e=false;d.find('.pt_multibetoptions input[type="checkbox"]').each(function(f){if(b(this).is(":checked")&&f>0){if(!c.hasClass("hidden")){c.addClass("hidden")}e=true}return true});if(!e){c.removeClass("hidden")}};a.selectAll=function(){var c=b("#parlayTicketContainer");c.find('.pt_multibetoptions input[type="checkbox"]').each(function(){var d=b(this);d.prop("checked",true)});c.find("#pt_selectAll").addClass("hidden");c.find("#pt_deselectAll").removeClass("hidden");a.hideUnhideParlayOdss()};a.deselectAll=function(){var c=b("#parlayTicketContainer");c.find('.pt_multibetoptions input[type="checkbox"]').each(function(e){if(e!=0){var d=b(this);d.prop("checked",false)}});c.find("#pt_deselectAll").addClass("hidden");c.find("#pt_selectAll").removeClass("hidden");a.hideUnhideParlayOdss()};a.changeLink=function(){var d=b("#parlayTicketContainer");var c=true;d.find('.pt_multibetoptions input[type="checkbox"]').each(function(){if(!b(this).is(":checked")){c=false}});if(c){d.find("#pt_selectAll").addClass("hidden");d.find("#pt_deselectAll").removeClass("hidden")}else{d.find("#pt_deselectAll").addClass("hidden");d.find("#pt_selectAll").removeClass("hidden")}};a.calculateMaxPayout=function(){var e=b("#parlayTicketContainer");var h=0;var f=e.find("#pt_riskAmount").val().replace(/,/g,"");var c=0;var g=e.find("#pt_oddsFormat").val();var d=e.find('.pt_multibetoptions input[type="checkbox"]');d.each(function(i){if(b(this).is(":checked")){c=e.find("#pt_roundRobin_"+i).val();h+=parseFloat(a.calculateWinFromRisk(f,g,c))}});if(h==0){c=e.find("#pt_roundRobin_0").val();h=parseFloat(a.calculateWinFromRisk(f,g,c))}e.find("#pt_maxPayout").html(a.toFixed(h,2).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))};a.toFixed=function(e,c){var f=Math.pow(10,c+1),d=Math.floor(e*f);return Math.round(d/10)*10/f};a.allowOnlyValidCharacters=function(c){if(c.keyCode==46||c.keyCode==8||c.keyCode==13||c.keyCode==110||c.keyCode==188||c.keyCode==190){}else{if((c.keyCode<48||c.keyCode>57)&&(c.keyCode<96||c.keyCode>105)){c.preventDefault()}}};a.formatStake=function(){var d=b("#parlayTicketContainer");var e=d.find("#pt_riskAmount");if(e.val()==""){return}var c=parseFloat(e.val().replace(/,/g,""));e.val(a.toFixed(c,2).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))};a.calculateTotalBets=function(){var d=b("#parlayTicketContainer");var e=0;var c=d.find('.pt_multibetoptions input[type="checkbox"]');c.each(function(f){if(b(this).is(":checked")){e+=parseFloat(d.find("#pt_roundrobin_"+f+"_bets").val())}});if(e==0){e=1}d.find("#pt_totalbets").val(e);return false};a.calculateWinFromRisk=function(e,f,d){var c=0;switch(f){case"american":if(d<0){c=(e/d*-100)}else{c=(e/100*d)}break;case"decimal":c=e*(d-1);break;case"hongkong":c=e*d;break;case"malay":case"indonesian":if(d<0){c=e/-(d)}else{if(d!=0){c=e*d}}break;default:}return c.toFixed(4)};return a}(PSPARLAYTICKET||{},jQuery));jQueryReady(function(){$(document).ready(function(){PSPARLAYTICKET.initialize()})});